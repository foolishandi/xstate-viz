"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[837],{30750:function(e,t,n){n.d(t,{f:function(){return s}});var r=n(85893),i=n(48017),o=n(45754),a=n(64115),s=function(e){var t=e.text;return(0,r.jsxs)(i.xu,{paddingTop:"6",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:[(0,r.jsx)(o.$,{size:"xl"}),(0,r.jsx)(a.x,{marginTop:"4",children:t})]})}},4943:function(e,t,n){n.d(t,{W:function(){return u},g:function(){return d}});var r=n(85893),i=n(71129),o=n(67294),a=n(38415),s=(0,n(46063).Q6)("EditorTheme"),c=(0,i.Z)(s,2),l=c[0],d=c[1];function u(e){var t=e.children,n=(0,o.useState)((function(){return a.q.getEditorTheme()||"xstateViz"})),i=n[0],s=n[1],c=(0,o.useMemo)((function(){return{theme:i,switchTheme:s}}),[i]);return(0,r.jsx)(l,{value:c,children:t})}},79412:function(e,t,n){n.d(t,{w:function(){return a},b:function(){return s}});var r=n(71129),i=(0,n(46063).Q6)("Embed"),o=(0,r.Z)(i,2),a=o[0],s=o[1]},40837:function(e,t,n){n.r(t),n.d(t,{__N_SSP:function(){return xi},default:function(){return yi}});var r,i=n(85893),o=n(71129),a=n(809),s=n.n(a),c=n(30266),l=n(92809),d=n(70895),u=n(48017),f=n(67294),v=n(36353),h=n(63168),p=n(95142),g=n(97755),x=n(40404),y=n(9008),m=!0,E=function(e){var t=e.importElk,n=void 0!==t&&t,r=(0,x.Z)(e,["importElk"]);return(0,i.jsxs)(y.default,{children:[(0,i.jsx)("link",{rel:"apple-touch-icon",href:"/viz/favicon@256.png"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,i.jsx)("link",{rel:"icon",href:"/viz/favicon.png"}),(0,i.jsx)("title",{children:r.title}),(0,i.jsx)("meta",{name:"description",content:r.description}),n&&(0,i.jsx)("script",{src:"https://unpkg.com/elkjs@0.7.1/lib/elk.bundled.js"}),(0,i.jsx)("meta",{property:"og:type",content:"website"}),(0,i.jsx)("meta",{property:"og:url",content:"https://stately.ai/viz"}),(0,i.jsx)("meta",{property:"og:title",content:r.ogTitle}),(0,i.jsx)("meta",{property:"og:description",content:r.description}),r.ogImageUrl&&m&&(0,i.jsx)("meta",{property:"og:image",content:r.ogImageUrl}),(0,i.jsx)("meta",{property:"twitter:card",content:"summary_large_image"}),(0,i.jsx)("link",{crossorigin:!0,rel:"stylesheet",type:"text/css",href:"https://g.alicdn.com/code/lib/loaders.css/0.1.2/loaders.min.css"})]})},j=n(46063),b=(0,j.Q6)("Canvas"),O=(0,o.Z)(b,2),S=O[0],w=O[1],P=n(79412),T=n(85305),D=n(50862),k=n(67546),I=n(32888),C=n(93441),R=n(72026),A=n(45754),N=n(67101),L=n(48420),_=n(32800),z=n(30375),M=n(66310),V=n(38415);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.slow=1.09]="slow",e[e.normal=1.15]="normal"}(r||(r={}));var F=Z(Z({},{zoom:1,viewbox:{minX:0,minY:0},canvasPanelPosition:{offsetY:50,offsetX:0,width:0,height:0}}),{},{elkGraph:void 0,embed:void 0}),H=(0,M.createModel)(F,{events:{"ZOOM.OUT":function(e,t){return{zoomFactor:t,point:e}},"ZOOM.IN":function(e,t){return{zoomFactor:t,point:e}},"POSITION.RESET":function(){return{}},PAN:function(e,t){return{dx:e,dy:t}},"PAN.LEFT":function(e){return{isLongPan:e}},"PAN.RIGHT":function(e){return{isLongPan:e}},"PAN.UP":function(e){return{isLongPan:e}},"PAN.DOWN":function(e){return{isLongPan:e}},SOURCE_CHANGED:function(e){return{id:e}},CANVAS_RECT_CHANGED:function(e,t,n,r){return{offsetX:t,offsetY:e,width:n,height:r}},"elkGraph.UPDATE":function(e){return{elkGraph:e}},FIT_TO_CONTENT:function(){return{}}}}),U=r.normal,Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.normal;return 1/e},B=function(e){return!(null!==e&&void 0!==e&&e.isEmbedded)||e.zoom},W=function(e){return e.zoom>.1},q=function(e){return e.zoom<2},X=function(e,t){var n=t.translationPoint,r=void 0===n?function(e){var t=e.canvasPanelPosition;return{x:t.offsetX+t.width/2,y:t.offsetY+t.height/2}}(e):n,i=t.zoomFactor,o=e.zoom,a=e.viewbox,s=e.zoom*i,c=r.x-e.canvasPanelPosition.offsetX,l=r.y-e.canvasPanelPosition.offsetY;return{zoom:s,viewbox:{minX:(c+a.minX)*(s/o)-c,minY:(l+a.minY)*(s/o)-l}}},K=H.createMachine({on:{CANVAS_RECT_CHANGED:{actions:H.assign((function(e,t){return{canvasPanelPosition:{offsetY:t.offsetY,offsetX:t.offsetX,height:t.height,width:t.width}}}))},"ZOOM.OUT":{actions:H.assign((function(e,t){return X(e,{translationPoint:t.point,zoomFactor:Y(t.zoomFactor)})})),cond:function(e){return B(e.embed)&&W(e)},target:".throttling",internal:!1},"ZOOM.IN":{actions:H.assign((function(e,t){return X(e,{translationPoint:t.point,zoomFactor:t.zoomFactor||U})})),cond:function(e){return B(e.embed)&&q(e)},target:".throttling",internal:!1},PAN:{actions:H.assign({viewbox:function(e,t){return{minX:e.viewbox.minX+t.dx,minY:e.viewbox.minY+t.dy}}}),cond:function(e){return function(e){var t;return!(null!==(t=e.embed)&&void 0!==t&&t.isEmbedded)||e.embed.isEmbedded&&e.embed.pan}(e)},target:".throttling",internal:!1},"PAN.LEFT":{actions:H.assign({viewbox:function(e,t){return{minX:e.viewbox.minX-(t.isLongPan?50:10),minY:e.viewbox.minY}}}),target:".throttling",internal:!1},"PAN.RIGHT":{actions:H.assign({viewbox:function(e,t){return{minX:e.viewbox.minX+(t.isLongPan?50:10),minY:e.viewbox.minY}}}),target:".throttling",internal:!1},"PAN.UP":{actions:H.assign({viewbox:function(e,t){return{minX:e.viewbox.minX,minY:e.viewbox.minY-(t.isLongPan?50:10)}}}),target:".throttling",internal:!1},"PAN.DOWN":{actions:H.assign({viewbox:function(e,t){return{minX:e.viewbox.minX,minY:e.viewbox.minY+(t.isLongPan?50:10)}}}),target:".throttling",internal:!1},"POSITION.RESET":{actions:H.assign({zoom:H.initialContext.zoom,viewbox:H.initialContext.viewbox}),target:".throttling",internal:!1},SOURCE_CHANGED:{target:".throttling",internal:!1,actions:H.assign((function(e,t){var n;if(null===(n=e.embed)||void 0===n||!n.isEmbedded){var r=J(t);return r||{}}return{}}))},"elkGraph.UPDATE":{actions:[H.assign({elkGraph:function(e,t){return t.elkGraph}}),(0,z.lW)("FIT_TO_CONTENT")]},FIT_TO_CONTENT:{actions:[H.assign({zoom:function(e){return e.elkGraph?.9*Math.min(e.canvasPanelPosition.width/e.elkGraph.width,e.canvasPanelPosition.height/e.elkGraph.height,2):e.zoom}}),H.assign({viewbox:function(e){return e.elkGraph?{minX:e.elkGraph.width*e.zoom/2-e.canvasPanelPosition.width/2,minY:e.elkGraph.height*e.zoom/2-e.canvasPanelPosition.height/2}:e.viewbox}})]}},initial:"idle",states:{idle:{},throttling:{after:{300:"saving"},meta:{description:"\n          Throttling a moment before saving to ensure\n          we don't do too much saving to localStorage\n        "}},saving:{always:{actions:"persistPositionToLocalStorage",target:"idle"}}}}),J=function(e){return"SOURCE_CHANGED"!==e.type?null:V.q.getPosition(e.id)},$=n(1338),Q=n(94679),ee=n(59043);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=(0,M.createModel)({session:null,ref:null},{events:{DRAG_SESSION_STARTED:function(e){return{pointerId:e.pointerId,point:e.point}},DRAG_SESSION_STOPPED:function(){return{}},DRAG_POINT_MOVED:function(e){return{point:e.point}}}}),ie=re.createMachine({preserveActionOrder:!0,initial:"check_session_data",states:{check_session_data:{always:[{cond:function(e){return!!e.session},target:"active",actions:(0,z.lj)((function(e){return re.events.DRAG_SESSION_STARTED(e.session)}))},"idle"]},idle:{invoke:{id:"dragSessionStartedListener",src:function(e){var t=e.ref;return function(e){var n=t.current,r=function(t){0===t.button&&e(re.events.DRAG_SESSION_STARTED({pointerId:t.pointerId,point:{x:t.pageX,y:t.pageY}}))};return n.addEventListener("pointerdown",r),function(){return n.removeEventListener("pointerdown",r)}}}},on:{DRAG_SESSION_STARTED:{target:"active",actions:Q.actions.forwardTo(ee.K.Parent)}}},active:{entry:["capturePointer","setSessionData"],exit:["releasePointer","clearSessionData"],invoke:{id:"dragSessionListeners",src:function(e){var t=e.ref,n=e.session;return function(e){var r=t.current,i=function(t){t.pointerId===n.pointerId&&e(re.events.DRAG_POINT_MOVED({point:{x:t.pageX,y:t.pageY}}))},o=function(t){t.pointerId===n.pointerId&&e(re.events.DRAG_SESSION_STOPPED())};return r.addEventListener("pointermove",i),r.addEventListener("pointerup",o),r.addEventListener("pointercancel",o),function(){r.removeEventListener("pointermove",i),r.removeEventListener("pointerup",o),r.removeEventListener("pointercancel",o)}}}},on:{DRAG_POINT_MOVED:{actions:["sendPointDelta","updatePoint"]},DRAG_SESSION_STOPPED:{target:"idle",actions:Q.actions.forwardTo(ee.K.Parent)}}}}},{actions:{capturePointer:function(e,t){var n=e.ref,r=e.session;return n.current.setPointerCapture(t.pointerId||(null===r||void 0===r?void 0:r.pointerId))},releasePointer:function(e){var t=e.ref,n=e.session;return t.current.releasePointerCapture(n.pointerId)},setSessionData:(0,z.f0)({session:function(e,t){return t.pointerId&&t.point?{pointerId:t.pointerId,point:t.point}:e.session}}),clearSessionData:(0,z.f0)({session:null}),updatePoint:(0,z.f0)({session:function(e,t){return ne(ne({},e.session),{},{point:t.point})}}),sendPointDelta:(0,z.lj)((function(e,t){return{type:"POINTER_MOVED_BY",delta:{x:t.point.x-e.session.point.x,y:t.point.y-e.session.point.y}}}))}});function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se=(0,M.createModel)({ref:null},{events:{LOCK:function(){return{}},RELEASE:function(){return{}},ENABLE_PANNING:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{sessionSeed:e}},DISABLE_PANNING:function(){return{}},ENABLE_PAN_MODE:function(){return{}},DISABLE_PAN_MODE:function(){return{}},DRAG_SESSION_STARTED:function(e){return{point:e.point}},DRAG_SESSION_STOPPED:function(){return{}},POINTER_MOVED_BY:function(e){return{delta:e.delta}},WHEEL_PRESSED:function(e){return{data:e}},WHEEL_RELEASED:function(){return{}}}}),ce=se.createMachine({preserveActionOrder:!0,initial:"checking_if_disabled",states:{checking_if_disabled:{always:[{target:"permanently_disabled",cond:"isPanDisabled"},"enabled"]},permanently_disabled:{},enabled:{type:"parallel",states:{mode:{initial:"lockable",states:{lockable:{initial:"released",states:{released:{invoke:[{src:"invokeDetectLock"},{src:"wheelPressListener"}],on:{LOCK:"locked",WHEEL_PRESSED:"wheelPressed"}},locked:{entry:Q.actions.raise(se.events.ENABLE_PANNING()),exit:Q.actions.raise(se.events.DISABLE_PANNING()),on:{RELEASE:"released"},invoke:{src:"invokeDetectRelease"}},wheelPressed:{entry:Q.actions.raise((function(e,t){return se.events.ENABLE_PANNING(t.data)})),exit:Q.actions.raise(se.events.DISABLE_PANNING()),on:{DRAG_SESSION_STOPPED:"released"}}},on:{ENABLE_PAN_MODE:"pan"}},pan:{entry:Q.actions.raise(se.events.ENABLE_PANNING()),exit:Q.actions.raise(se.events.DISABLE_PANNING()),on:{DISABLE_PAN_MODE:"lockable"}}}},panning:{initial:"disabled",states:{disabled:{on:{ENABLE_PANNING:"enabled"}},enabled:{entry:"disableTextSelection",exit:"enableTextSelection",invoke:{id:"dragSessionTracker",src:function(e,t){return ie.withContext(ae(ae({},re.initialContext),{},{ref:e.ref,session:"ENABLE_PANNING"===t.type?t.sessionSeed:t.data}))}},on:{DISABLE_PANNING:"disabled"},initial:"idle",states:{idle:{meta:{cursor:"grab"},on:{DRAG_SESSION_STARTED:"active"}},active:{initial:"grabbed",on:{DRAG_SESSION_STOPPED:".done"},states:{grabbed:{meta:{cursor:"grabbing"},on:{POINTER_MOVED_BY:{target:"dragging",actions:"sendPanChange"}}},dragging:{meta:{cursor:"grabbing"},on:{POINTER_MOVED_BY:{actions:"sendPanChange"}}},done:{type:"final"}},onDone:"idle"}}}}}}}}},{actions:{disableTextSelection:function(e){e.ref.current.style.userSelect="none"},enableTextSelection:function(e){e.ref.current.style.userSelect="unset"}},services:{wheelPressListener:function(e){return function(t){var n=e.ref.current,r=function(e){1===e.button&&t(se.events.WHEEL_PRESSED({pointerId:e.pointerId,point:{x:e.pageX,y:e.pageY}}))};return n.addEventListener("pointerdown",r),function(){return n.removeEventListener("pointerdown",r)}}},invokeDetectLock:function(){return function(e){function t(t){var n=t.target;"Space"!==t.code||(0,j.nF)(n)||(t.preventDefault(),e("LOCK"))}return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}},invokeDetectRelease:function(){return function(e){function t(t){"Space"===t.code&&(t.preventDefault(),e("RELEASE"))}return window.addEventListener("keyup",t),function(){window.removeEventListener("keyup",t)}}}}}),le=function(e){var t;return null===(t=Object.values(e.meta).find((function(e){return Boolean(e.cursor)})))||void 0===t?void 0:t.cursor},de=function(e){var t=e.children,n=e.panModeEnabled,a=w(),s=(0,P.b)(),c=(0,f.useRef)(null),l=(0,$.eO)(ce,{actions:{sendPanChange:Q.actions.send((function(e,t){return H.events.PAN(-t.delta.x,-t.delta.y)}),{to:a})},guards:{isPanDisabled:function(){return!(null===s||void 0===s||!s.isEmbedded)&&!s.pan}},context:ae(ae({},se.initialContext),{},{ref:c})}),d=(0,o.Z)(l,2),u=d[0],v=d[1];return f.useEffect((function(){v(n?se.events.ENABLE_PAN_MODE():se.events.DISABLE_PAN_MODE())}),[n]),(0,f.useEffect)((function(){var e=new ResizeObserver((function(e){var t=e[0].target.getBoundingClientRect();a.send({type:"CANVAS_RECT_CHANGED",height:t.height,width:t.width,offsetX:t.left,offsetY:t.top})}));return e.observe(c.current),function(){e.disconnect()}}),[a]),(0,f.useEffect)((function(){function e(e){var t=e.target;if(!(0,j.J6)(t))switch(e.key){case"ArrowUp":if((0,j.CZ)(t))return;return e.preventDefault(),void a.send(H.events["PAN.DOWN"](e.shiftKey));case"ArrowLeft":if((0,j.CZ)(t))return;return e.preventDefault(),void a.send(H.events["PAN.RIGHT"](e.shiftKey));case"ArrowDown":if((0,j.CZ)(t))return;return e.preventDefault(),void a.send(H.events["PAN.UP"](e.shiftKey));case"ArrowRight":if((0,j.CZ)(t))return;return e.preventDefault(),void a.send(H.events["PAN.LEFT"](e.shiftKey));case"+":case"=":if((0,j.fl)(e))return;if(e.shiftKey)return;return e.preventDefault(),void a.send("ZOOM.IN");case"-":if((0,j.fl)(e))return;if(e.shiftKey)return;return e.preventDefault(),void a.send("ZOOM.OUT");case"1":case"!":if(!e.shiftKey)return;return e.preventDefault(),void a.send("FIT_TO_CONTENT")}}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,f.useEffect)((function(){var e=function(e){var t=!(null!==s&&void 0!==s&&s.isEmbedded)||s.zoom,n=!(null!==s&&void 0!==s&&s.isEmbedded)||s.pan;t&&(0,j.fl)(e)?(e.preventDefault(),e.deltaY>1?a.send(H.events["ZOOM.OUT"]({x:e.clientX,y:e.clientY},r.slow)):e.deltaY<-1&&a.send(H.events["ZOOM.IN"]({x:e.clientX,y:e.clientY},r.slow))):!n||e.metaKey||e.ctrlKey||(e.preventDefault(),a.send(H.events.PAN(e.deltaX,e.deltaY)))},t=c.current;return t.addEventListener("wheel",e),function(){t.removeEventListener("wheel",e)}}),[a,s]),(0,i.jsx)("div",{ref:c,style:{cursor:le(u),WebkitFontSmoothing:"auto"},children:t})},ue=n(68216),fe=n(25997),ve=n(50509),he=function(){function e(t,n){var r=this;(0,ue.Z)(this,e),this.parent=n,(0,l.Z)(this,"id",void 0),(0,l.Z)(this,"data",void 0),(0,l.Z)(this,"children",void 0),(0,l.Z)(this,"ports",void 0),(0,l.Z)(this,"edges",void 0),(0,l.Z)(this,"layout",void 0),this.id=t.id,this.data=t.stateNode,this.children=t.children,this.children.forEach((function(e){e.parent=r})),this.ports=t.ports,this.edges=t.edges.map((function(e){return new pe(e)}))}return(0,fe.Z)(e,[{key:"absolute",get:function(){return this.parent?this.layout?{x:this.layout.x+this.parent.absolute.x,y:this.layout.y+this.parent.absolute.y}:void 0:this.layout}}]),(0,fe.Z)(e,[{key:"level",get:function(){var e,t;return(null!==(e=null===(t=this.parent)||void 0===t?void 0:t.level)&&void 0!==e?e:-1)+1}}]),e}(),pe=function e(t){(0,ue.Z)(this,e),(0,l.Z)(this,"id",void 0),(0,l.Z)(this,"source",void 0),(0,l.Z)(this,"target",void 0),(0,l.Z)(this,"label",void 0),(0,l.Z)(this,"transition",void 0),(0,l.Z)(this,"sections",void 0),this.id=t.id,this.source=t.source,this.target=t.target,this.label=t.label,this.transition=t.transition,this.sections=t.sections};function ge(e){var t=(0,ve.flatten)(e.transitions.map((function(t,n){return(t.target?t.target:[e]).map((function(r,i){return new pe({id:"".concat(e.id,":").concat(n,":").concat(i),source:e,target:r,transition:t,label:{text:t.eventType,x:0,y:0},sections:[]})}))})));return new he({id:e.id,stateNode:e,children:(0,j.G)(e).map((function(e){return ge(e)})),edges:t,ports:[]})}function xe(e){return e.children.length?[e].concat(e.children.map(xe).flat()):[e]}function ye(e){var t=xe(e),n=new Map;return t.forEach((function(e){e.edges.forEach((function(e){!function(e,t){n.get(e)||n.set(e,new Set),n.get(e).add(t)}(e.target,e)}))})),n}var me,Ee=n(21083),je=n(17120);function be(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Se(e){var t=new Set,n=[];return e.forEach((function(r,i){var o=e[i-1],a=e[i+1];if(((null===o||void 0===o?void 0:o.x)!==r.x||r.x!==(null===a||void 0===a?void 0:a.x))&&((null===o||void 0===o?void 0:o.y)!==r.y||r.y!==(null===a||void 0===a?void 0:a.y))){var s="".concat(r.x,"|").concat(r.y);t.has(s)||n.push(r)}})),n}function we(e){var t=[];return e.forEach((function(n,r){var i=[n,e[r+1],e[r+2]],o=i[0],a=i[1];if(i[2]&&a){var s={x:o.x+(a.x-o.x)/2,y:o.y+(a.y-o.y)/2,color:"green",label:"midpoint"};t.push(o,s)}else t.push(o)})),t}function Pe(e,t,n){return!(e.x===t.x&&n.x===t.x||e.y===t.y&&n.y===t.y)}!function(e){e.Top="top",e.Right="right",e.Bottom="bottom",e.Left="left"}(me||(me={}));var Te=function(e,t){return{type:"vector",x:t.x-e.x,y:t.y-e.y}},De=function(e){var t=e.x*e.x+e.y*e.y;return t=Math.sqrt(t),{type:"vector",x:e.x/t,y:e.y/t}},ke=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,i=Te(t,e),o=Te(t,n),a=Math.hypot(i.x,i.y),s=Math.hypot(o.x,o.y);if(a*s===0)return{p1:t,p2:t,p:t};var c=Math.min(r,a-.1,s-.1),l=De(i),d=De(o),u={x:t.x+l.x*c,y:t.y+l.y*c},f={x:t.x+d.x*c,y:t.y+d.y*c},v={p1:u,p2:f,p:t};return v};function Ie(e){return e.map((function(e){var t=(0,je.Z)(e),n=t[0],r=t.slice(1);return[n].concat((0,Ee.Z)(r.map((function(e){return"".concat(e.x,",").concat(e.y)})))).join(" ")})).join(" ")}function Ce(e){var t,n=[],r=[],i=[],a=be(e);try{for(a.s();!(t=a.n()).done;){var s=t.value,c=(0,o.Z)(s,1)[0];"L"!==c&&i.length>1&&(n.push([].concat(i)),i.length=0),("M"===c||"L"===c)&&i.push(s)}}catch(f){a.e(f)}finally{a.f()}i.length>1&&n.push([].concat(i));for(var l=function(){var e=u[d],t=we(Se(e.map((function(e){return(0,o.Z)(e,2)[1]})))),n=[e[0]];t.forEach((function(e,t,r){if(t>=2&&t<=r.length-2&&Pe(r[t-1],e,r[t+1])){var i=ke(r[t-1],e,r[t+1],10),o=i.p1,a=i.p2,s=i.p;n.push(["L",o],["C",o,s,a])}else n.push(["L",e])})),r.push.apply(r,n)},d=0,u=n;d<u.length;d++)l();return r}var Re=function(e){var t=e.id;return(0,i.jsx)("marker",{id:t,viewBox:"0 0 10 10",markerWidth:"5",markerHeight:"5",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto",children:(0,i.jsx)("path",{d:"M0,0 L0,10 L10,5 z","data-viz":"edge-arrow"})})},Ae=(0,j.Fx)("Simulation"),Ne=(0,o.Z)(Ae,3),Le=Ne[0],_e=Ne[1],ze=(0,Ne[2])((function(e){return e.hasTag("inspecting")?"inspecting":"visualizing"}));var Me,Ve=function(e){var t,n=e.edge,r=e.order,o=_e(),a=(0,h.v)(o,(function(e){var t;return null===(t=e.context.serviceDataMap[e.context.currentSessionId])||void 0===t?void 0:t.state.configuration.includes(n.source)}));if(n.sections.length){var s,c=n.sections[0],l=(t=[["M",c.startPoint]].concat((0,Ee.Z)((null===(s=c.bendPoints)||void 0===s?void 0:s.map((function(e){return["L",e]})))||[])))[t.length-1][1],d=Math.sign(c.endPoint.x-l.x),u=Math.sign(c.endPoint.y-l.y),f={x:c.endPoint.x-5*d,y:c.endPoint.y-5*u};t.push(["L",f])}var v="".concat(n.source.order,"-").concat(r);return t?(0,i.jsxs)("g",{"data-viz":"edgeGroup","data-viz-edge":n.id,"data-viz-active":a||void 0,children:[(0,i.jsx)("defs",{children:(0,i.jsx)(Re,{id:v})}),(0,i.jsx)("path",{stroke:"#fff4",strokeWidth:2,fill:"none",d:Ie(Ce(t)),"data-viz":"edge",markerEnd:"url(#".concat(v,")")})]}):null},Ge=n(3379);function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e){var t=[];return function e(n){t.push.apply(t,(0,Ee.Z)(n.edges)),n.children.forEach(e)}(e),t}function Ue(e){var t=He(e),n=new Map,r=new Map;return t.forEach((function(e){var t=function(e){var t=e.source,n=e.target;if(t===n)return t.parent;for(var r=new Set([t]),i=t.parent;i;)r.add(i),i=i.parent;for(i=n;i;){if(r.has(i))return i;i=i.parent}return t.machine}(e);n.has(t)||n.set(t,[]),n.get(t).push(e),r.set(e.id,t)})),[n,r]}function Ye(e,t){var n,r=t.get(e.id),i=Be(e),o=e.source===e.target,a=(null===(n=e.source.parent)||void 0===n?void 0:n.initial)===e.source.key,s=[e.source.id],c=o?[We(e.target.id)]:[i];return{id:e.id,sources:s,targets:c,labels:[{id:"label:"+e.id,width:r.width,height:r.height,text:e.label.text||"always",layoutOptions:{"edgeLabels.inline":o?"false":"true","edgeLabels.placement":"CENTER","edgeLabels.centerLabelPlacementStrategy":"TAIL_LAYER"}}],edge:e,sections:[],layoutOptions:{"elk.layered.priority.direction":a?"1":"0"}}}function Be(e){return"port:".concat(e.id)}function We(e){return"self:".concat(e)}Me=new(n.n(Ge)());var qe=function(e){return new Promise((function(e){var t=new Map,n=setInterval((function(){document.querySelector('[data-viz="machine"]')&&(document.querySelectorAll("[data-rect-id]").forEach((function(e){var n=e.dataset.rectId,r=e.getBoundingClientRect();t.set(n,r)})),clearInterval(n),e(t))}),100)}))};function Xe(e){return e.children.length?Math.max.apply(Math,(0,Ee.Z)(e.children.map((function(e){return Xe(e)})))):e.level}function Ke(e,t){var n,r=t.relativeNodeEdgeMap,i=t.backLinkMap,o=t.rectMap,a=o.get(e.id),s=o.get("".concat(e.id,":content")),c=r[0].get(e.data)||[],l=Array.from(null!==(n=i.get(e.data))&&void 0!==n?n:[]),d=l.some((function(e){return e.source===e.target})),u=Xe(e)>e.level+1,f=u&&!t.previousError;return Fe(Fe({id:e.id},e.children.length?void 0:{width:a.width,height:a.height}),{},{node:e,children:Je(e,t),absolutePosition:{x:0,y:0},edges:c.map((function(e){return Ye(e,o)})),ports:l.map((function(e){return{id:Be(e),width:5,height:5,layoutOptions:{}}})).concat(d?[{id:We(e.id),width:5,height:5,layoutOptions:{}}]:[]),layoutOptions:Fe({"elk.padding":"[top=".concat(s.height+30,", left=30, right=30, bottom=30]"),"elk.spacing.labelLabel":"10"},u&&Fe({"elk.aspectRatio":"2","elk.layered.wrapping.strategy":"MULTI_EDGE"},f&&{"elk.layered.compaction.postCompaction.strategy":"LEFT"}))})}function Je(e,t){return e.children.map((function(e){return Ke(e,t)}))}function $e(e){return"absolutePosition"in e}function Qe(){return(Qe=(0,c.Z)(s().mark((function e(t){var n,r,i,o,a,c,l,d,u,f,v,h,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe(t.id);case 2:r=e.sent,i=Ue(t),o=ye(t),a=i[0].get(void 0)||[],c={relativeNodeEdgeMap:i,backLinkMap:o,rectMap:r},l=function(e){return{id:"root",edges:a.map((function(e){return Ye(e,r)})),children:[Ke(t,e)],layoutOptions:{"elk.hierarchyHandling":"INCLUDE_CHILDREN","elk.algorithm":"layered","elk.layered.considerModelOrder":"NODES_AND_EDGES","elk.layered.wrapping.strategy":"MULTI_EDGE","elk.aspectRatio":"2","elk.direction":"RIGHT"}}},d=void 0,u=0;case 10:if(!(u<=2)||d){e.next=24;break}return u++,e.prev=12,e.next=15,Me.layout(l(c));case 15:d=e.sent,e.next=22;break;case 18:e.prev=18,e.t0=e.catch(12),console.error(e.t0),c.previousError=e.t0;case 22:e.next=10;break;case 24:if(d){e.next=26;break}throw new Error("Unable to layout ELK node.");case 26:return f=new Map,v=function(e){var t,n,r=i[1].get(e.id),o=r&&f.get(r),a=o?e.sections.map((function(e){var t,n;return Fe(Fe({},e),{},{startPoint:{x:e.startPoint.x+o.absolutePosition.x,y:e.startPoint.y+o.absolutePosition.y},endPoint:{x:e.endPoint.x+o.absolutePosition.x,y:e.endPoint.y+o.absolutePosition.y},bendPoints:null!==(t=null===(n=e.bendPoints)||void 0===n?void 0:n.map((function(e){return{x:e.x+o.absolutePosition.x,y:e.y+o.absolutePosition.y}})))&&void 0!==t?t:[]})})):e.sections;e.edge.sections=a,e.edge.label.x=((null===(t=e.labels)||void 0===t?void 0:t[0].x)||0)+((null===o||void 0===o?void 0:o.absolutePosition.x)||0),e.edge.label.y=((null===(n=e.labels)||void 0===n?void 0:n[0].y)||0)+((null===o||void 0===o?void 0:o.absolutePosition.y)||0)},h=function e(t,n){var r,i,o,a;f.set(t.node.data,t),t.absolutePosition={x:(null!==(r=null===n||void 0===n?void 0:n.absolutePosition.x)&&void 0!==r?r:0)+t.x,y:(null!==(i=null===n||void 0===n?void 0:n.absolutePosition.y)&&void 0!==i?i:0)+t.y},t.node.layout={width:t.width,height:t.height,x:t.x,y:t.y},null===(o=t.edges)||void 0===o||o.forEach((function(e){v(e)})),null===(a=t.children)||void 0===a||a.forEach((function(n){$e(n)&&e(n,t)}))},null===(n=d.edges)||void 0===n||n.forEach(v),p=d.children[0],h(p,void 0),e.abrupt("return",d);case 33:case"end":return e.stop()}}),e,null,[[12,18]])})))).apply(this,arguments)}var et=function(e){var t=e.node,n=_e(),r=(0,h.v)(n,(function(e){var n;return null===(n=e.context.serviceDataMap[e.context.currentSessionId])||void 0===n?void 0:n.state.configuration.includes(t.data)}));if(!t.absolute)return null;var o={x:t.absolute.x-10,y:t.absolute.y+10},a={x:o.x-5,y:o.y-10},s="n".concat(Math.floor(1e3*Math.random()));return(0,i.jsxs)("g",{"data-viz":"edgeGroup","data-viz-active":r||void 0,children:[(0,i.jsx)("defs",{children:(0,i.jsx)(Re,{id:s})}),(0,i.jsx)("circle",{"data-viz":"initialEdge-circle",r:"4",cx:a.x,cy:a.y,fill:"var(--stroke)"}),(0,i.jsx)("path",{"data-viz":"edge",d:"M ".concat(a.x,",").concat(a.y," Q ").concat(a.x,",").concat(o.y," ").concat(o.x,",").concat(o.y," L ").concat(o.x+1,", ").concat(o.y),stroke:"var(--stroke)",strokeWidth:2,fill:"none",markerEnd:"url(#".concat(s,")"),pathLength:1})]})};function tt(e){var t,n=[];return(null===(t=e.data.parent)||void 0===t?void 0:t.initial)===e.data.key&&n.push(e),e.children.forEach((function(e){n.push.apply(n,(0,Ee.Z)(tt(e)))})),n}var nt=function(e){var t=e.digraph,n=He(t),r=tt(t);return(0,i.jsxs)("svg",{style:{position:"absolute",height:"100vh",width:"100vw",top:0,left:0,pointerEvents:"none",overflow:"visible"},children:[r.map((function(e){return(0,i.jsx)(et,{node:e},e.id)})),n.map((function(e,t){return(0,i.jsx)(Ve,{edge:e,order:t},e.id)}))]})},rt=n(49444),it=n(38456),ot=n.n(it);var at=function(e){var t=e.children,n=e.title,r=(0,f.useRef)(null),o=(0,f.useState)(n||""),a=o[0],s=o[1];return(0,f.useEffect)((function(){r.current&&!n&&s(r.current.textContent)}),[n]),(0,i.jsx)("div",{"data-viz":"action-type",title:a,ref:r,children:t})},st=function(e){var t=e.action;return(0,i.jsxs)(at,{children:[(0,i.jsx)("strong",{children:"raise"})," ",t.event]})},ct=function(e){var t=e.action;if(!t.event)return(0,i.jsxs)(at,{children:[(0,i.jsx)("strong",{children:"send"})," ",(0,i.jsx)("em",{children:"unknown"})]});var n="xstate.update"===t.event.type?(0,i.jsx)("strong",{children:"send update"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{children:"send"})," ",t.event.type]}),r=t.to?t.to===ee.K.Parent?(0,i.jsxs)(i.Fragment,{children:["to ",(0,i.jsx)("em",{children:"parent"})]}):(0,i.jsxs)(i.Fragment,{children:["to ",t.to]}):"";return(0,i.jsxs)(at,{children:[n," ",r]})},lt=function(e){var t=e.action;return(0,i.jsxs)(at,{children:[(0,i.jsx)("strong",{children:"log"})," ",t.label]})},dt=function(e){var t=e.action;return(0,i.jsxs)(at,{children:[(0,i.jsx)("strong",{children:"cancel"})," ",t.sendId]})},ut=function(e){var t=e.action;return(0,i.jsxs)(at,{children:[(0,i.jsx)("strong",{children:"stop"})," ","object"===typeof t.activity&&"id"in t.activity?t.activity.id:(0,i.jsx)("em",{children:"expr"})]})},ft=function(e){var t,n=e.action;return(0,i.jsxs)(at,{children:[(0,i.jsx)("strong",{children:"assign"})," ","object"===typeof n.assignment?Object.keys(n.assignment).join(", "):(0,i.jsx)("em",{children:(null===(t=n.assignment)||void 0===t?void 0:t.name)||"expr"})]})},vt=function(){return(0,i.jsx)(at,{children:(0,i.jsx)("strong",{children:"choose"})})},ht=function(e){var t=function(e){return e?"function"===typeof e.exec?(0,j.Kb)(e.type)?"anonymous":e.type:e.type?e.type.startsWith("xstate.")?e.type.match(/^xstate\.(.+)$/)[1]:e.type:null:null}(e.action);return null===t?null:(0,i.jsx)(at,{children:"anonymous"===t?(0,i.jsx)("em",{children:"anonymous"}):(0,i.jsx)("strong",{children:t})})},pt=function(e){var t,n,r=e.action,o=e.kind;if((0,j.Sp)(r))return null;var a=null!==(t=(n={},(0,l.Z)(n,ee.M.Assign,(0,i.jsx)(ft,{action:r})),(0,l.Z)(n,ee.M.Raise,(0,i.jsx)(st,{action:r})),(0,l.Z)(n,ee.M.Send,(0,i.jsx)(ct,{action:r})),(0,l.Z)(n,ee.M.Log,(0,i.jsx)(lt,{action:r})),(0,l.Z)(n,ee.M.Cancel,(0,i.jsx)(dt,{action:r})),(0,l.Z)(n,ee.M.Stop,(0,i.jsx)(ut,{action:r})),(0,l.Z)(n,ee.M.Choose,(0,i.jsx)(vt,{action:r})),n)[r.type])&&void 0!==t?t:(0,i.jsx)(ht,{action:r});return(0,i.jsx)("div",{"data-viz":"action","data-viz-action":o,children:a})};function gt(e){return"number"!==typeof e&&isNaN(+e)?e:"".concat(e,"ms")}function xt(e){if(yt(e)){var t=e.match(/:invocation\[(\d+)\]$/);if(!t)return e;var n=(0,o.Z)(t,2)[1];return"anonymous [".concat(n,"]")}return e}function yt(e){return/:invocation\[/.test(e)}function mt(e){var t=e.invoke,n=yt(t.id),r="string"===typeof t.src?t.src:t.src.type,o=n?"anonymous":t.id;return(0,i.jsx)("div",{"data-viz":"action","data-viz-action":"invoke",title:"".concat(o," (").concat(r,")"),children:(0,i.jsx)("div",{"data-viz":"action-type",children:n?(0,i.jsx)("em",{children:o}):o})})}var Et=function(e){var t=e.eventType,n=e.delay;e.onChangeEventType;if(t.startsWith("done.state."))return(0,i.jsx)("div",{"data-viz":"eventType","data-viz-keyword":"done",children:(0,i.jsx)("em",{"data-viz":"eventType-keyword",children:"onDone"})});if(t.startsWith("done.invoke.")){var r=t.match(/^done\.invoke\.(.+)$/);return(0,i.jsxs)("div",{"data-viz":"eventType","data-viz-keyword":"done",children:[(0,i.jsx)("em",{"data-viz":"eventType-keyword",children:"done:"})," ",(0,i.jsx)("div",{"data-viz":"eventType-text",children:r?xt(r[1]):"??"})]})}if(t.startsWith("error.platform.")){var o=t.match(/^error\.platform\.(.+)$/);return(0,i.jsxs)("div",{"data-viz":"eventType","data-viz-keyword":"error",children:[(0,i.jsx)("em",{"data-viz":"eventType-keyword",children:"error:"})," ",(0,i.jsx)("div",{"data-viz":"eventType-text",children:o?o[1]:"??"})]})}return"DELAYED_INVALID"===(null===n||void 0===n?void 0:n.delayType)?(0,i.jsx)("div",{"data-viz":"eventType",children:t}):"DELAYED_VALID"===(null===n||void 0===n?void 0:n.delayType)?(0,i.jsxs)("div",{"data-viz":"eventType","data-viz-keyword":"after",children:[(0,i.jsx)("em",{"data-viz":"eventType-keyword",children:"after"})," ",(0,i.jsx)("div",{"data-viz":"eventType-text",children:n.delayString})]}):""===t?(0,i.jsx)("div",{"data-viz":"eventType","data-viz-keyword":"always",children:(0,i.jsx)("em",{"data-viz":"eventType-keyword",children:"always"})}):(0,i.jsx)("div",{"data-viz":"eventType",children:(0,i.jsx)("div",{"data-viz":"eventType-text",children:t})})};function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ot=function(e){var t=e.value;return(0,i.jsx)("div",{"data-viz":"stateNode-key",children:(0,i.jsx)("div",{"data-viz":"stateNode-keyText",title:t,children:t})})},St=function e(t){var n,r,a,s,c=t.stateNode,l=t.node,d=_e(),u=(0,p.L)(d),v=(0,o.Z)(u,1)[0],h=v.context.serviceDataMap[v.context.currentSessionId],g=null===h||void 0===h?void 0:h.state,y=null===h||void 0===h?void 0:h.machine,m=(0,f.useMemo)((function(){if(v.context.previewEvent)try{return null===y||void 0===y?void 0:y.transition(g,v.context.previewEvent)}catch(e){return void console.error(e)}}),[v,g,y]);return g?(0,i.jsx)("div",{"data-viz":"stateNodeGroup","data-viz-active":!!g.configuration.find((function(e){return e.id===c.id}))||void 0,"data-viz-previewed":(null===m||void 0===m?void 0:m.configuration.find((function(e){return e.id===c.id})))||void 0,style:bt({position:"absolute"},l.layout&&{left:"".concat(l.layout.x,"px"),top:"".concat(l.layout.y,"px")}),children:(0,i.jsxs)("div",{"data-viz":"stateNode","data-viz-type":c.type,"data-viz-history":null!==(n=c.history)&&void 0!==n?n:void 0,"data-viz-parent-type":null===(r=c.parent)||void 0===r?void 0:r.type,"data-viz-atomic":["atomic","final"].includes(c.type)||void 0,"data-rect-id":c.id,style:bt({},l.layout&&{width:"".concat(l.layout.width,"px"),height:"".concat(l.layout.height,"px")}),children:[(0,i.jsxs)("div",{"data-viz":"stateNode-content","data-rect-id":"".concat(c.id,":content"),children:[(0,i.jsxs)("div",{"data-viz":"stateNode-header",children:[["history","final"].includes(c.type)&&(0,i.jsx)("div",{"data-viz":"stateNode-type","data-viz-type":c.type,"data-viz-history":null!==(a=c.history)&&void 0!==a?a:void 0}),(0,i.jsx)(Ot,{value:c.key}),c.tags.length>0&&(0,i.jsx)("div",{"data-viz":"stateNode-tags",children:c.tags.map((function(e,t){return(0,i.jsx)("div",{"data-viz":"stateNode-tag",children:e},t)}))})]}),c.definition.invoke.length>0&&(0,i.jsx)("div",{"data-viz":"stateNode-invocations",children:c.definition.invoke.map((function(e){return(0,i.jsx)(mt,{invoke:e},e.id)}))}),c.definition.entry.length>0&&(0,i.jsx)("div",{"data-viz":"stateNode-actions","data-viz-actions":"entry",children:c.definition.entry.map((function(e,t){return(0,i.jsx)(pt,{action:e,kind:"entry"},t)}))}),c.definition.exit.length>0&&(0,i.jsx)("div",{"data-viz":"stateNode-actions","data-viz-actions":"exit",children:c.definition.exit.map((function(e,t){return(0,i.jsx)(pt,{action:e,kind:"exit"},t)}))}),(null===(s=c.meta)||void 0===s?void 0:s.description)&&(0,i.jsx)("div",{"data-viz":"stateNode-meta",children:(0,i.jsx)(ot(),{components:{a:function(e){e.node;var t=(0,x.Z)(e,["node"]);return(0,i.jsx)(rt.r,bt({},t))}},children:c.meta.description})})]}),"states"in c&&(0,i.jsx)("div",{"data-viz":"stateNode-states",children:l.children.map((function(t){return(0,i.jsx)(e,{stateNode:t.data,node:t},t.id)}))})]})}):null},wt=function(e){var t=e.active,n=e.duration;return(0,i.jsxs)("svg",{viewBox:"0 0 100 100","data-viz":"delay","data-viz-active":t||void 0,style:{transform:"rotate(-90deg)",display:"inline-block",width:"1rem",height:"1rem",overflow:"visible","--duration":n},children:[(0,i.jsx)("circle",{"data-viz":"delay-circle",cx:50,cy:50,r:45,strokeDasharray:1,pathLength:1,stroke:"#fff",fill:"transparent"}),(0,i.jsx)("circle",{"data-viz":"delay-fill",cx:50,cy:50,r:45,strokeDasharray:1,pathLength:1,stroke:"#fff",fill:"transparent"})]})};function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dt=function(e){var t,n;return null===(t=e.context.serviceDataMap[e.context.currentSessionId])||void 0===t||null===(n=t.machine.options)||void 0===n?void 0:n.delays},kt=function(e){var t=e.edge,n=(e.index,e.position),r=t.transition,a=_e(),s=(0,h.v)(a,(function(e){var t;return null===(t=e.context.serviceDataMap[e.context.currentSessionId])||void 0===t?void 0:t.state})),c=(0,h.v)(a,Dt),l=(0,f.useMemo)((function(){return c?function(e,t,n,r){try{if(!e.startsWith("xstate.after"))return;var i=e.match(/^xstate\.after\((.*)\)#.*$/);if(!i)return{delayType:"DELAYED_INVALID"};var a=(0,o.Z)(i,2)[1],s=+a;if(Number.isNaN(s)){var c=t[a];s="number"===typeof c?c:c(n,r)}return{delayType:"DELAYED_VALID",delay:s,delayString:gt(a)}}catch(l){return void console.log(l)}}(r.eventType,c,null===s||void 0===s?void 0:s.context,null===s||void 0===s?void 0:s.event):void 0}),[r.eventType,c,s]);if(!s)return null;var d,u="DELAYED_INVALID"===(null===l||void 0===l?void 0:l.delayType)||!s.nextEvents.includes(r.eventType),v=s.nextEvents.includes(t.transition.eventType)&&!!s.configuration.find((function(e){return e===t.source}));return(0,i.jsxs)("button",{"data-viz":"transition","data-viz-potential":v||void 0,"data-viz-disabled":u||void 0,"data-is-delayed":null!==l&&void 0!==l?l:void 0,"data-rect-id":t.id,style:Tt(Tt({position:"absolute"},n&&{left:"".concat(n.x,"px"),top:"".concat(n.y,"px")}),{},{"--delay":"DELAYED_VALID"===(null===l||void 0===l?void 0:l.delayType)&&l.delay}),disabled:u,onMouseEnter:function(){a.send({type:"EVENT.PREVIEW",eventType:r.eventType})},onMouseLeave:function(){a.send({type:"PREVIEW.CLEAR"})},onClick:function(){a.send({type:"SERVICE.SEND",event:(0,ve.toSCXMLEvent)({type:r.eventType},{origin:s._sessionid})})},children:[(0,i.jsxs)("div",{"data-viz":"transition-label",children:[(0,i.jsxs)("span",{"data-viz":"transition-event",children:[(0,i.jsx)(Et,{eventType:r.eventType,delay:l}),l&&"DELAYED_VALID"===l.delayType&&(0,i.jsx)(wt,{active:v,duration:l.delay})]}),r.cond&&(0,i.jsx)("span",{"data-viz":"transition-guard",children:(d=r.cond,d.name)})]}),(0,i.jsx)("div",{"data-viz":"transition-content",children:r.actions.length>0&&(0,i.jsx)("div",{"data-viz":"transition-actions",children:r.actions.map((function(e,t){return(0,i.jsx)(pt,{action:e,kind:"do"},t)}))})})]})},It=function(e){var t=(0,M.createModel)({digraph:e,elkGraph:void 0},{events:{GRAPH_UPDATED:function(e){return{digraph:e}}}});return t.createMachine({context:t.initialContext,initial:"loading",states:{loading:{entry:"notifyLayoutPending",invoke:{src:function(e){return function(e){return Qe.apply(this,arguments)}(e.digraph)},onDone:{target:"success",actions:[(0,z.f0)({elkGraph:function(e,t){return t.data}}),"notifyLayoutReady"]}}},success:{on:{GRAPH_UPDATED:{target:"loading",actions:[t.assign({digraph:function(e,t){return t.digraph}})]}}}}})},Ct=function(e){var t=e.digraph,n=(0,f.useMemo)((function(){return He(t)}),[t]);return(0,i.jsxs)("div",{style:{opacity:.001},"data-viz":"machine","data-viz-id":t.id,children:[(0,i.jsx)(St,{stateNode:t.data,node:t}),n.map((function(e,t){return(0,i.jsx)(kt,{edge:e,index:t,position:e.label&&{x:e.label.x,y:e.label.y}},e.id)}))]})},Rt=function(e){var t=e.elkNode;return(0,i.jsx)(St,{stateNode:t.node.data,node:t.node})},At=(0,f.memo)(nt),Nt=(0,f.memo)(Rt),Lt=(0,f.memo)(kt),_t=(0,f.memo)(Ct),zt=function(e){var t=e.digraph,n=_e(),r=(0,$.eO)((function(){return It(t)}),{actions:{notifyLayoutPending:function(){n.send("LAYOUT.PENDING")},notifyLayoutReady:function(){n.send("LAYOUT.READY")}}}),a=(0,o.Z)(r,2),s=a[0],c=a[1],l=w(),d=(0,h.v)(l,(function(e){return e.context})),u=d.viewbox,v=d.zoom;(0,f.useEffect)((function(){c({type:"GRAPH_UPDATED",digraph:t})}),[t,c]),(0,f.useEffect)((function(){l.send({type:"elkGraph.UPDATE",elkGraph:s.context.elkGraph})}),[s.context.elkGraph]);var p=(0,f.useMemo)((function(){return He(t)}),[t]);return s.matches("success")?(0,i.jsxs)("div",{"data-testid":"canvas-graph",style:{transformOrigin:"0 0",transform:"translate3d(".concat(-u.minX,"px, ").concat(-u.minY,"px, 0) scale(").concat(v,")")},children:[(0,i.jsx)(At,{digraph:t}),(0,i.jsx)(Nt,{elkNode:s.context.elkGraph.children[0]}),p.map((function(e,t){return(0,i.jsx)(Lt,{edge:e,index:t,position:e.label&&{x:e.label.x,y:e.label.y}},e.id)}))]}):(0,i.jsx)(_t,{digraph:t})},Mt=n(46755),Vt=n(19950),Gt=n(70058),Zt=n(29306),Ft=n.n(Zt),Ht=(n(32882),n(20256));[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddLike"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sourceFileId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addLike"},arguments:[{kind:"Argument",name:{kind:"Name",value:"sourceFileId"},value:{kind:"Variable",name:{kind:"Name",value:"sourceFileId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SourceFile"}}]}}]}}].concat((0,Ee.Z)(Ht.S.definitions)),[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RemoveLike"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sourceFileId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeLike"},arguments:[{kind:"Argument",name:{kind:"Name",value:"sourceFileId"},value:{kind:"Variable",name:{kind:"Name",value:"sourceFileId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SourceFile"}}]}}]}}].concat((0,Ee.Z)(Ht.S.definitions));function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bt=function(e,t){return function(n){return(0,i.jsx)(Gt.J,Yt(Yt(Yt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},t),n),{},{children:e}))}},Wt=(Bt((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M0 0h24v24H0V0zm0 0h24v24H0V0z",fill:"none"}),(0,i.jsx)("path",{d:"M9 21h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.58 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2zM9 9l4.34-4.34L12 10h9v2l-3 7H9V9zM1 9h4v12H1z"})]})),Bt((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,i.jsx)("path",{d:"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"})]})),Bt((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,i.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"})]})),Bt((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,i.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})]})),Bt((0,i.jsx)("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})),Bt((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("g",{children:(0,i.jsx)("rect",{fill:"none",height:"24",width:"24",x:"0"})}),(0,i.jsx)("g",{children:(0,i.jsxs)("g",{children:[(0,i.jsx)("polygon",{points:"20,7 20.94,4.94 23,4 20.94,3.06 20,1 19.06,3.06 17,4 19.06,4.94"}),(0,i.jsx)("polygon",{points:"8.5,7 9.44,4.94 11.5,4 9.44,3.06 8.5,1 7.56,3.06 5.5,4 7.56,4.94"}),(0,i.jsx)("polygon",{points:"20,12.5 19.06,14.56 17,15.5 19.06,16.44 20,18.5 20.94,16.44 23,15.5 20.94,14.56"}),(0,i.jsx)("path",{d:"M17.71,9.12l-2.83-2.83C14.68,6.1,14.43,6,14.17,6c-0.26,0-0.51,0.1-0.71,0.29L2.29,17.46c-0.39,0.39-0.39,1.02,0,1.41 l2.83,2.83C5.32,21.9,5.57,22,5.83,22s0.51-0.1,0.71-0.29l11.17-11.17C18.1,10.15,18.1,9.51,17.71,9.12z M14.17,8.42l1.41,1.41 L14.41,11L13,9.59L14.17,8.42z M5.83,19.59l-1.41-1.41L11.59,11L13,12.41L5.83,19.59z"})]})})]}))),qt=Bt((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,i.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm2 16H5V5h11.17L19 7.83V19zm-7-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zM6 6h9v4H6z"})]})),Xt=Bt((0,i.jsx)("g",{children:(0,i.jsx)("path",{d:"M458.7,81.1L458.7,81.1c0-44.8-36.3-81.1-81.1-81.1c-44.8,0-81.1,36.3-81.1,81.1c0,40.3,29.3,73.7,67.8,80l0.5,0.1v37.3 c0,28.3-22.9,51.2-51.2,51.2H151.5v-89.3c36.8-8.1,64-40.5,64-79.3c0-44.8-36.3-81.1-81.1-81.1C89.6,0,53.3,36.3,53.3,81.1 c0,38.7,27.2,71.1,63.5,79.1l0.5,0.1v191.4c-36.8,8.1-64,40.5-64,79.3c0,44.8,36.3,81.1,81.1,81.1c44.8,0,81.1-36.3,81.1-81.1 c0-38.7-27.1-71.1-63.5-79.1l-0.6-0.1v-67.9h162.1c47.1-0.1,85.3-38.2,85.3-85.3v-39.1C433.6,149.5,458.6,118.3,458.7,81.1 L458.7,81.1z M87.5,81.1c0-25.9,21-46.9,46.9-46.9c25.9,0,46.9,21,46.9,46.9c0,25.9-21,46.9-46.9,46.9 C108.5,128,87.5,107,87.5,81.1L87.5,81.1z M181.3,430.9c0,25.9-21,46.9-47,46.9c-25.9,0-46.9-21-46.9-46.9 c0-25.9,21-46.9,46.9-46.9C160.3,384,181.3,405,181.3,430.9L181.3,430.9z M377.6,128c-25.9,0-47-21-47-46.9s21-46.9,47-46.9 c25.9,0,46.9,21,46.9,46.9C424.5,107,403.5,128,377.6,128L377.6,128z"})}),{viewBox:"0 0 512 512"}),Kt=Bt((0,i.jsx)("g",{children:(0,i.jsx)("path",{fill:"currentColor",d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"})}),{viewBox:"0 0 448 512"}),Jt=(Bt((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,i.jsx)("path",{d:"M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"})]}),{fill:"current"}),Bt((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("g",{children:(0,i.jsx)("rect",{fill:"none",height:"24",width:"24"})}),(0,i.jsx)("g",{children:(0,i.jsx)("path",{d:"M11,21h-1l1-7H7.5c-0.88,0-0.33-0.75-0.31-0.78C8.48,10.94,10.42,7.54,13.01,3h1l-1,7h3.51c0.4,0,0.62,0.19,0.4,0.66 C12.97,17.55,11,21,11,21z"})})]}),{fill:"current"}),Bt((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{style:{fill:"#fff"},d:"M20,44c-0.256,0-0.512-0.098-0.707-0.293L4.586,29l14.707-14.707c0.391-0.391,1.023-0.391,1.414,0 s0.391,1.023,0,1.414L7.414,29l13.293,13.293c0.391,0.391,0.391,1.023,0,1.414C20.512,43.902,20.256,44,20,44z"}),(0,i.jsx)("path",{style:{fill:"#fff"},d:"M37,44c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414L49.586,29L36.293,15.707 c-0.391-0.391-0.391-1.023,0-1.414s1.023-0.391,1.414,0L52.414,29L37.707,43.707C37.512,43.902,37.256,44,37,44z"}),(0,i.jsx)("path",{style:{fill:"#fff"},d:"M24.001,50c-0.071,0-0.144-0.008-0.216-0.023c-0.539-0.118-0.88-0.651-0.762-1.191l9-41 c0.118-0.539,0.654-0.88,1.191-0.762c0.539,0.118,0.88,0.651,0.762,1.191l-9,41C24.874,49.682,24.46,50,24.001,50z"})]}),{viewBox:"0 0 55 55"}),Bt((0,i.jsx)("path",{d:"M18 24h-6.55c-1.08 0-2.14-.45-2.89-1.23l-7.3-7.61 2.07-1.83c.62-.55 1.53-.66 2.26-.27L8 14.34V4.79c0-1.38 1.12-2.5 2.5-2.5.17 0 .34.02.51.05.09-1.3 1.17-2.33 2.49-2.33.86 0 1.61.43 2.06 1.09.29-.12.61-.18.94-.18 1.38 0 2.5 1.12 2.5 2.5v.28c.16-.03.33-.05.5-.05 1.38 0 2.5 1.12 2.5 2.5V20c0 2.21-1.79 4-4 4zM4.14 15.28l5.86 6.1c.38.39.9.62 1.44.62H18c1.1 0 2-.9 2-2V6.15c0-.28-.22-.5-.5-.5s-.5.22-.5.5V12h-2V3.42c0-.28-.22-.5-.5-.5s-.5.22-.5.5V12h-2V2.51c0-.28-.22-.5-.5-.5s-.5.22-.5.5V12h-2V4.79c0-.28-.22-.5-.5-.5s-.5.23-.5.5v12.87l-5.35-2.83-.51.45z"}),{fill:"current"})),$t=n(90629),Qt=n(46029),en=n(87253),tn=((0,$t.C)({id:"likes",initial:"waitingForSourceData",entry:(0,z.f0)({notifRef:function(){return(0,Qt.Cs)(en.c)}}),on:{SOURCE_DATA_CHANGED:[{cond:function(e,t){return!t.data},target:".waitingForSourceData"},{cond:function(e,t){return t.data.youHaveLiked},target:".liked",actions:(0,z.f0)((function(e,t){return{likesCount:t.data.likesCount}}))},{target:".notLiked",actions:(0,z.f0)((function(e,t){return{likesCount:t.data.likesCount}}))}]},states:{waitingForSourceData:{tags:"hidden"},liked:{tags:["liked"],on:{LIKE_BUTTON_TOGGLED:[{cond:"isLoggedIn",target:"unliking"},{actions:"reportLoggedOutUserTriedToLike"}]}},notLiked:{tags:["notLiked"],on:{LIKE_BUTTON_TOGGLED:[{cond:"isLoggedIn",target:"liking"},{actions:"reportLoggedOutUserTriedToLike"}]}},liking:{tags:["liked","pending"],invoke:{src:"like",onDone:{target:"liked",actions:(0,z.f0)({likesCount:function(e){if("undefined"!==typeof e.likesCount)return e.likesCount+1}})},onError:{target:"notLiked",actions:(0,z.lW)({type:"BROADCAST",message:"Liking failed - an unknown error occurred.",status:"error"},{to:function(e){return e.notifRef}})}}},unliking:{tags:["notLiked","pending"],invoke:{src:"unlike",onDone:{target:"notLiked",actions:(0,z.f0)({likesCount:function(e){if("undefined"!==typeof e.likesCount)return e.likesCount-1}})},onError:{target:"liked",actions:(0,z.lW)({type:"BROADCAST",message:"Unliking failed - an unknown error occurred.",status:"error"},{to:function(e){return e.notifRef}})}}}}}),n(85713)),nn=function(e){return"".concat("https://dev.stately.ai/registry","/machines/").concat(e,".png")},rn=n(76640),on=function(e){var t=e.children;return(0,i.jsx)(u.xu,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",position:"absolute",height:"100%",width:"100%",background:"blackAlpha.100",zIndex:1,children:t})},an=n(11163),sn=n(41428);var cn=function(e){return'<iframe src="'.concat(e,'"\nallow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"\nsandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"\n></iframe>')},ln=(0,M.createModel)({loaded:!1,iframe:null,embedUrl:"",previewUrl:"",embedCode:cn(""),params:{mode:rn.T.Viz,panel:rn.i.Code,readOnly:!0,showOriginalLink:!0,controls:!1,pan:!1,zoom:!1}},{events:{PARAMS_CHANGED:function(e){return{params:e}},PREVIEW:function(){return{}},IFRAME_READY:function(e){return{iframe:e}},IFRAME_LOADED:function(){return{}},IFRAME_ERROR:function(){return{}},RETRY:function(){return{}}}}),dn=(ln.createMachine({id:"preview",type:"parallel",preserveActionOrder:!1,states:{form:{initial:"ready",states:{ready:{entry:["makeEmbedUrlAndCode",(0,sn.pure)((function(e){if(!e.loaded)return{type:"makePreviewUrl"}})),"updateEmbedCopy",(0,z.lW)("PREVIEW")],on:{PARAMS_CHANGED:{actions:["saveParams"],internal:!1,target:"ready"}}}}},iframe:{initial:"idle",on:{PREVIEW:[{cond:function(e){return e.loaded},target:".updating",internal:!1},".loading"],IFRAME_READY:{actions:[ln.assign({iframe:function(e,t){return t.iframe}})]}},states:{idle:{},updating:{meta:{description:"Once iframe is loaded, we no longer change its `src` because that reloads the iframe window. Instead, we send the new url to its window using `postMessage`. That message will be picked up by `window.onmessage` listener that uses NextJS `router.pushState`"},entry:function(e){var t,n;null===(t=e.iframe)||void 0===t||null===(n=t.contentWindow)||void 0===n||n.postMessage({type:"EMBED_PARAMS_CHANGED",url:e.embedUrl.replace("/viz","")},"*")}},loading:{tags:"preview_loading",on:{IFRAME_LOADED:"loaded",IFRAME_ERROR:"error"}},loaded:{entry:ln.assign({loaded:!0})},error:{tags:"preview_error",on:{RETRY:"loading"}}}}}}),(0,M.createModel)({},{events:{COPY_LINK:function(){return{}}}}).createMachine({id:"shareMachine",on:{COPY_LINK:{target:".pending"}},initial:"notCopied",states:{notCopied:{},pending:{tags:["loading"],meta:{description:"\n          A fake pending state to give the user\n          some visual feedback\n        "},after:{250:{target:"copied"}}},copied:{entry:["copyLinkToClipboard"],tags:"copied",after:{2e3:{target:"notCopied"}}}}}),n(43753)),un=function(){var e,t,n=(0,tn.CN)(),r=(0,o.Z)(n,1)[0],a=(0,g.pL)(),s=r.context.sourceRegistryData,c=(null===a||void 0===a||a.id,null===s||void 0===s||null===(e=s.system)||void 0===e||null===(t=e.owner)||void 0===t||t.id,(0,dn.F)()),l=c.theme,d=c.setTheme,u=(0,f.useState)(!1),v=u[0],p=u[1],x=_e(),y=(0,h.v)(x,(function(e){var t;return e.context.currentSessionId?null===(t=e.context.serviceDataMap[e.context.currentSessionId])||void 0===t?void 0:t.machine:void 0}));return(0,i.jsxs)(R.Ug,{zIndex:1,justifyContent:"center",height:"3rem",children:[!1,(0,i.jsx)(L.h,{"aria-label":"\u4e3b\u9898\u5207\u6362",title:"\u4e3b\u9898\u5207\u6362",icon:"dark"==l?(0,i.jsx)(Mt.k,{}):(0,i.jsx)(Vt.N,{}),size:"sm",marginLeft:2,onClick:function(){var e="dark"==l?"light":"dark";d(e),V.q.saveTheme(e)},variant:"secondary"}),(0,i.jsx)(L.h,{disabled:!y,"aria-label":"\u622a\u56fe",title:"\u622a\u56fe",isLoading:v,icon:(0,i.jsx)(Gt.J,{viewBox:"0 0 1024 1024",children:(0,i.jsx)("path",{d:"M981.333333 224v661.333333a53.393333 53.393333 0 0 1-53.333333 53.333334H96a53.393333 53.393333 0 0 1-53.333333-53.333334V224a53.393333 53.393333 0 0 1 53.333333-53.333333h80a10.713333 10.713333 0 0 0 8.533333-4.266667L229.333333 106.666667a53.58 53.58 0 0 1 42.666667-21.333334h138.666667a53.58 53.58 0 0 1 42.666666 21.333334l44.8 59.733333A10.713333 10.713333 0 0 0 506.666667 170.666667h421.333333a53.393333 53.393333 0 0 1 53.333333 53.333333z m-348.666666 451.333333a170.666667 170.666667 0 1 0-120.666667 50 169.553333 169.553333 0 0 0 120.666667-50z m7.333333-120.666666c0 70.58-57.42 128-128 128s-128-57.42-128-128 57.42-128 128-128 128 57.42 128 128z m213.333333-234.666667a21.333333 21.333333 0 0 0-21.333333-21.333333h-85.333333a21.333333 21.333333 0 0 0 0 42.666666h85.333333a21.333333 21.333333 0 0 0 21.333333-21.333333z",fill:"#ffffff","p-id":"2645"})}),size:"sm",marginLeft:2,onClick:function(){var e=document.querySelector("div[data-testid=canvas-graph]"),t=document.querySelector("div[data-viz=stateNodeGroup]");if(e&&t){p(!0);var n=4*(t.offsetWidth+24),r=4*(t.offsetHeight+24),i={style:{transform:"scale(".concat(4,")"),width:n+"px",height:r+"px",background:"dark"==l?"#000":"#fff",overflow:"hidden"},width:n,height:r};Ft().toJpeg(e,i).then((function(e){var t=document.createElement("a");t.download="viz-screenshot.jpg",t.href=e,t.click(),t.remove()})).finally((function(){p(!1)}))}},variant:"secondary"})]})},fn=n(64115);var vn=function(e){var t=e.children;return(0,i.jsx)(fn.x,{fontSize:"3xl",fontWeight:"semibold",letterSpacing:"tighter",children:t})},hn=function(e){var t=e.children;return(0,i.jsx)(fn.x,{color:"gray.200",lineHeight:"tall",children:t})},pn=(0,$t.C)({initial:"welcomeArea",states:{welcomeArea:{on:{CLICK_START_CODING:{target:"startCodingRightAway"},CLICK_SEE_EXAMPLE:{target:"seeingExample"}}},seeingExample:{entry:"requestExample"},startCodingRightAway:{}}}),gn=function(){var e=(0,g.aC)(),t=(0,h.v)(e,tn.d6),n=(0,$.eO)(pn,{actions:{requestExample:function(){return t.send("EXAMPLE_REQUESTED")}}}),r=(0,o.Z)(n,2),a=r[0],s=(r[1],"dark"==(0,dn.F)().theme?"#fff":"#000");return(0,i.jsx)(on,{children:(0,i.jsxs)(u.xu,{maxW:"lg",p:"4",children:[a.matches("seeingExample")&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(R.Kq,{spacing:"4",children:[(0,i.jsxs)(R.Kq,{spacing:"2",children:[(0,i.jsx)(vn,{children:"Here you go!"}),(0,i.jsx)(hn,{children:"Here's an example of a state machine modelling a data fetch. You can press 'Visualize' to see the statechart appear."})]}),(0,i.jsx)(rt.r,{color:"blue.300",fontSize:"sm",href:"https://xstate.js.org/docs",target:"_blank",rel:"noreferrer",children:"New to XState? Read the docs"})]})}),a.matches("startCodingRightAway")&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(R.Kq,{spacing:"4",children:[(0,i.jsxs)(R.Kq,{spacing:"2",children:[(0,i.jsx)(vn,{children:"Go for it!"}),(0,i.jsx)(hn,{children:"Start writing code in the right-hand panel, then press 'Visualize' to see the statechart appear."})]}),(0,i.jsx)(rt.r,{color:"blue.300",fontSize:"sm",href:"https://xstate.js.org/docs",target:"_blank",rel:"noreferrer",children:"New to XState? Read here..."})]})}),!1,a.matches("welcomeArea")&&(0,i.jsxs)(R.Ug,{spacing:"2",children:[(0,i.jsxs)("div",{style:{color:s},children:["\u5728\u53f3\u4fa7\u9762\u677f\u5199\u4ee3\u7801",(0,i.jsx)("br",{}),"\u70b9\u51fb \u201c\u53ef\u89c6\u5316\u201d \u6309\u94ae \u72b6\u6001\u56fe\u5373\u53ef\u51fa\u73b0"]}),(0,i.jsx)(Gt.J,{viewBox:"0 0 1024 1024",boxSize:"4em",fill:s,children:(0,i.jsx)("path",{d:"M146.008574 695.983203q0-15.989844-10.999892-25.989746-10.999893-9.999902-25.499751-10.999892t-25.499751 10.999892q-10.999893 11.999883-10.999893 25.499751t10.999893 25.499751q10.999893 11.999883 25.499751 10.999893t25.499751-10.999893q10.999893-9.999902 10.999892-24.999756z m804.972139-328.986787q0-29.999707-22.49978-51.499497t-50.499507-22.49978H548.994639q0-10.999893 7.999922-27.499732t19.499809-31.999687q11.499888-15.499849 18.49982-38.999619t7.999921-47.499537q0-37.999629-24.49976-55.499458t-66.499351-17.499829q-12.999873 0-50.999502 78.999229l-21.999785 37.999629q-21.999785 35.999648-62.999385 82.499194t-58.999424 60.499409q-37.999629 32.999678-78.999228 32.999678H219.007861v364.986436h18.989815q40.9996 0 94.999072 18.499819t110.498921 35.999649q56.499448 17.499829 103.498989 18.499819 106.998955 0 106.998955-94.999072 0-14.999854-2.99997-31.989688 17.999824-8.999912 27.999726-30.499702t8.999912-41.99959q-0.99999-20.4998-9.999902-38.499624 30.989697-28.999717 30.989697-68.999326 0-13.999863-6.499936-31.499693t-14.489859-26.499741h189.988145q28.999717 0 50.499507-21.49979t22.49978-51.499497z m72.999287-0.99999q0 59.999414-42.99958 102.998994t-102.998994 42.99958h-96.999053q-1.99998 35.999648-20.999795 68.999326 1.99998 11.999883 1.999981 23.999766 0 57.999434-34.999658 101.989004 0.99999 79.999219-47.999532 125.998769t-129.99873 45.999551q-75.999258 0-182.998213-39.999609-94.999072-33.999668-127.99875-33.999668H72.999287q-29.999707 0-51.499497-21.49979t-21.49979-51.499497V366.996416q0-30.999697 21.49979-52.499487t51.499497-21.49979h164.988389q5.999941 0 11.999883-1.999981t12.999873-7.999922q6.999932-5.999941 13.499868-9.999902t13.499868-13.499868q6.999932-9.499907 11.999883-12.499878t9.999902-11.999883q4.999951-8.999912 8.999912-8.999912 35.999648-42.99958 56.999444-73.999277 6.999932-11.999883 18.499819-35.999649t21.49979-40.999599q9.999902-16.999834 23.499771-35.499654t30.499702-28.999717q16.999834-10.499897 39.999609-10.499897 71.999297 0 117.998848 38.999619t46.999541 107.998945q0 38.999619-12.999873 72.999288h213.98791q58.999424 0 102.998994 42.99958t42.99958 102.998994z","p-id":"7580"})})]})]})})};function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mn=function(e){var t=f.useState(!1),n=(0,o.Z)(t,2),r=n[0],a=n[1],s=(0,P.b)(),c=_e(),l=w(),d=(0,tn.CN)(),v=(0,o.Z)(d,1)[0],p=(0,h.v)(c,(function(e){var t;return e.context.currentSessionId?null===(t=e.context.serviceDataMap[e.context.currentSessionId])||void 0===t?void 0:t.machine:void 0})),g=(0,h.v)(c,(function(e){return e.hasTag("layoutPending")})),x=(0,h.v)(c,(function(e){return e.hasTag("empty")})),y=(0,f.useMemo)((function(){return p?ge(p):void 0}),[p]),m=(0,h.v)(l,(function(e){return B(s)&&W(e.context)})),E=(0,h.v)(l,(function(e){return B(s)&&q(e.context)})),j=ze(),b=v.hasTag("canShowWelcomeMessage"),O=(0,f.useMemo)((function(){return!(null!==s&&void 0!==s&&s.isEmbedded)||s.controls}),[s]),S=(0,f.useMemo)((function(){return!(null!==s&&void 0!==s&&s.isEmbedded)||s.controls&&s.zoom}),[s]),z=(0,f.useMemo)((function(){return!(null!==s&&void 0!==s&&s.isEmbedded)||s.controls&&s.pan}),[s]);return(0,i.jsxs)(u.xu,yn(yn({display:"grid",height:"100%"},!(null!==s&&void 0!==s&&s.isEmbedded)&&{gridTemplateRows:"3rem 1fr auto"}),{},{children:[!(null!==s&&void 0!==s&&s.isEmbedded)&&(0,i.jsx)(u.xu,{"data-testid":"canvas-header",zIndex:1,padding:"0",children:(0,i.jsx)(un,{})}),(0,i.jsxs)(de,{panModeEnabled:r,children:[y&&(0,i.jsx)(zt,{digraph:y}),g&&(0,i.jsx)(on,{children:(0,i.jsx)(u.xu,{textAlign:"center",children:(0,i.jsxs)(R.gC,{spacing:"4",children:[(0,i.jsx)(A.$,{size:"xl"}),(0,i.jsx)(u.xu,{children:"\u72b6\u6001\u673a\u53ef\u89c6\u5316\u4e2d\u2026\u2026"})]})})}),x&&b&&(0,i.jsx)(gn,{})]}),O&&(0,i.jsxs)(u.xu,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",position:"absolute",bottom:0,left:0,paddingX:2,paddingY:3,zIndex:1,width:"100%","data-testid":"controls",children:[(0,i.jsxs)(N.h,{size:"sm",spacing:2,isAttached:!0,children:[S&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L.h,{"aria-label":"\u7f29\u5c0f",title:"\u7f29\u5c0f",icon:(0,i.jsx)(T.V,{}),disabled:!m,onClick:function(){return l.send("ZOOM.OUT")},variant:"secondary"}),(0,i.jsx)(L.h,{"aria-label":"\u653e\u5927",title:"\u653e\u5927",icon:(0,i.jsx)(D.d,{}),disabled:!E,onClick:function(){return l.send("ZOOM.IN")},variant:"secondary"})]}),(0,i.jsx)(L.h,{"aria-label":"\u9002\u914d\u5230\u7a97\u53e3\u5927\u5c0f",title:"\u9002\u914d\u5230\u7a97\u53e3\u5927\u5c0f",icon:(0,i.jsx)(Kt,{}),onClick:function(){return l.send("FIT_TO_CONTENT")},variant:"secondary"}),!(null!==s&&void 0!==s&&s.isEmbedded)&&(0,i.jsx)(L.h,{"aria-label":"\u91cd\u7f6e\u753b\u5e03",title:"\u91cd\u7f6e\u753b\u5e03",icon:(0,i.jsx)(k.n,{}),onClick:function(){return l.send("POSITION.RESET")},variant:"secondary"})]}),z&&(0,i.jsx)(L.h,{"aria-label":"\u5e73\u79fb\u6a21\u5f0f",title:"\u5e73\u79fb\u6a21\u5f0f",icon:(0,i.jsx)(Jt,{}),size:"sm",marginLeft:2,onClick:function(){return a((function(e){return!e}))},"aria-pressed":r,variant:r?"secondaryPressed":"secondary"}),"visualizing"===j&&(0,i.jsx)(_.z,{size:"sm",marginLeft:2,onClick:function(){return c.send("MACHINES.RESET")},variant:"secondary",children:"\u91cd\u7f6e\u72b6\u6001"}),!1]}),(0,i.jsx)("div",{style:{position:"absolute",right:-1,zIndex:1,top:"30%",border:"1px solid var(--chakra-colors-gray-500)",borderRightWidth:0,borderRadius:"5px 0 0 5px",textAlign:"center",cursor:"pointer",padding:"20px 5px",backgroundColor:"var(--viz-color-bg)"},onClick:function(){var t;null===e||void 0===e||null===(t=e.switchPanelChange)||void 0===t||t.call(e,!e.hidePanel)},title:e.hidePanel?"\u6253\u5f00\u9762\u677f":"\u5173\u95ed\u9762\u677f",children:e.hidePanel?(0,i.jsx)(I.Y,{boxSize:3,color:"var(--chakra-colors-gray-500)"}):(0,i.jsx)(C.L,{boxSize:3,color:"var(--chakra-colors-gray-500)"})})]}))},En=n(40747),jn=n(66147),bn=n(26729),On=n(36618),Sn=n(30070),wn=function(){var e=(0,tn.CN)(),t=(0,o.Z)(e,2),n=t[0],r=t[1];return(0,i.jsxs)(jn.u_,{isOpen:n.matches("creating"),onClose:function(){return r({type:"CLOSE_NAME_CHOOSER_MODAL"})},children:[(0,i.jsx)(jn.ZA,{}),(0,i.jsx)(jn.hz,{children:(0,i.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData(e.target).get("name")||"";r({type:"CHOOSE_NAME",name:t})},children:[(0,i.jsx)(jn.xB,{children:"Choose Name"}),(0,i.jsx)(jn.fe,{children:(0,i.jsxs)(bn.NI,{children:[(0,i.jsx)(On.l,{fontSize:"sm",children:"Choose a name for your fork"}),(0,i.jsx)(Sn.I,{type:"text",name:"name",placeholder:"Unnamed Source",defaultValue:n.context.desiredMachineName||""})]})}),(0,i.jsx)(jn.mz,{children:(0,i.jsxs)(R.Ug,{children:[(0,i.jsx)(_.z,{type:"button",onClick:function(){return r({type:"CLOSE_NAME_CHOOSER_MODAL"})},disabled:n.hasTag("persisting"),children:"Cancel"}),(0,i.jsx)(_.z,{type:"submit",colorScheme:"blue",isLoading:n.hasTag("persisting"),children:"Submit"})]})})]})})]})},Pn=(0,j.Q6)("Palette"),Tn=(0,o.Z)(Pn,2),Dn=Tn[0],kn=Tn[1],In=(0,M.createModel)(void 0,{events:{SHOW_PALETTE:function(){return{}},HIDE_PALETTE:function(){return{}}}}).createMachine({initial:"closed",states:{closed:{invoke:{src:function(){return function(e){var t=function(t){!(0,j.J6)(t.target)&&function(e){var t={"CtrlCMD+K":(0,j.fl)(e)&&"KeyK"===e.code,"Shift+?":e.shiftKey&&"Slash"===e.code};return Object.values(t).some(Boolean)}(t)&&(t.preventDefault(),e("SHOW_PALETTE"))};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}}},on:{SHOW_PALETTE:"opened"}},opened:{on:{HIDE_PALETTE:"closed"}}}}),Cn=n(93924),Rn=n(70478),An=n(18125),Nn=n(23762),Ln=n(57974),_n=function(e){return e.context.serviceDataMap},zn=function(){var e=_e(),t=(0,h.v)(e,_n),n=(0,h.v)(e,(function(e){return e.context.currentSessionId}));return(0,i.jsx)(Nn.aV,{children:Object.entries(t).map((function(r){var a,s=(0,o.Z)(r,2),c=s[0],l=s[1];return(0,i.jsxs)(Nn.HC,{display:"flex",flexDirection:"row",alignItems:"center",padding:2,marginTop:"0",opacity:n===c?1:.5,onClick:function(){e.send({type:"SERVICE.FOCUS",sessionId:c})},background:n===c?"whiteAlpha.200":"transparent",borderRadius:"md",_hover:{background:"whiteAlpha.100"},marginBottom:"2",cursor:"pointer",children:[(0,i.jsx)(Nn.DE,{as:Ln.m}),(0,i.jsxs)(fn.x,{flexGrow:1,textDecoration:(null===l||void 0===l?void 0:l.status)===Qt.TM.Stopped?"line-through":void 0,"data-testid":"actor:".concat(c),children:[(null===l||void 0===l?void 0:l.parent)&&t[l.parent]&&(0,i.jsxs)("span",{children:[t[l.parent].machine.id," (",l.parent,") \u2192"," "]}),(0,i.jsx)("strong",{children:null!==(a=l.machine.id)&&void 0!==a?a:"(machine)"})," (",c,")"]})]},c)}))})},Mn=n(14695),Vn=n(91077),Gn=n(6655),Zn=n(92953),Fn=n(62127),Hn=n(96699),Un=n(5152),Yn=n(22015),Bn=n(27370),Wn=n(56627),qn=function(e){var t=e.isOpen,n=(0,Yn.Xh)().openAndFocusFirstItem;return(0,f.useLayoutEffect)((function(){t&&n()}),[t,n]),null},Xn=function(e){var t=e.onClick,n=e.command,r=e.children;return(0,i.jsxs)(Bn.sN,{fontWeight:"700",padding:"5",onClick:t,children:[r,(0,i.jsx)(u.xu,{as:"span",paddingLeft:"10",marginLeft:"auto",children:n})]})},Kn=function(e){var t=e.onSave,n=e.onVisualize,r=(0,p.L)(kn()),a=(0,o.Z)(r,2),s=a[0],c=a[1],l=s.matches("opened"),d=function(){return c("HIDE_PALETTE")};return(0,i.jsxs)(jn.u_,{onClose:d,isOpen:l,isCentered:!0,motionPreset:"slideInBottom",children:[(0,i.jsx)(jn.ZA,{}),(0,i.jsx)(jn.hz,{minHeight:100,background:"none",boxShadow:"none",children:(0,i.jsx)(jn.fe,{display:"flex",justifyContent:"center",alignItems:"center",children:(0,i.jsxs)(Bn.v2,{defaultIsOpen:!0,isOpen:!0,closeOnSelect:!0,onClose:d,children:[(0,i.jsx)(qn,{isOpen:l}),(0,i.jsxs)(Bn.qy,{paddingY:5,children:[(0,i.jsx)(Xn,{onClick:t,command:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Wn.T,{children:(0,j.ZS)()})," + ",(0,i.jsx)(Wn.T,{children:"S"})]}),children:"Saves or updates the code in Stately Registry"}),(0,i.jsx)(Xn,{onClick:n,command:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(Wn.T,{children:[" ",(0,j.ZS)()]})," + ",(0,i.jsx)(Wn.T,{children:"Enter"})]}),children:"Visualizes the current editor code"})]})]})})})]})},Jn=n(67575);function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var er=n.n(Jn)().makeRootRealm(),tr=function(e){return function(){return e.apply(void 0,arguments)}},nr={setInterval:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return setInterval.apply(void 0,[tr(e)].concat(n))})),setTimeout:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return setTimeout.apply(void 0,[tr(e)].concat(n))})),clearTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return clearTimeout.apply(void 0,arguments)})),clearInterval:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return clearInterval.apply(void 0,arguments)}))};function rr(e){var t=[],n=function(e){return function(){var n=e.apply(void 0,arguments);return t.push(n),n}};return er.evaluate(e,Qn({exports:{},require:function(e){switch(e){case"xstate":return Qn(Qn({},Q),{},{createMachine:n($t.C),Machine:n($t.J)});case"xstate/lib/actions":return sn;case"xstate/lib/model":var t=M.createModel;return Qn(Qn({},M),{},{createModel:function(e,r){var i=t(e,r);return Qn(Qn({},i),{},{createMachine:n(i.createMachine)})}});default:throw new Error('External module ("'.concat(e,"\") can't be used."))}},console:{error:console.error,info:console.info,log:console.log,warn:console.warn}},nr)),t}function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ar(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Zn.Z)(e);if(t){var i=(0,Zn.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,Gn.Z)(this,n)}}function sr(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return cr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lr(e){var t,n=[],r="",i=sr(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;switch(o){case"raise":n.push("actions"),r+="const { raise } = actions;\n";break;case"XState":r+='import * as XState from "xstate";\n';break;default:n.push(o)}}}catch(a){i.e(a)}finally{i.f()}return n.length&&(r="import { ".concat((0,j.jj)(n).join(", "),' } from "xstate";\n').concat(r)),r}var dr=function(e){(0,Vn.Z)(n,e);var t=ar(n);function n(e,r){var i;return(0,ue.Z)(this,n),i=t.call(this,e),(0,l.Z)((0,Mn.Z)(i),"range",void 0),i.range=r,i}return(0,fe.Z)(n,[{key:"toString",value:function(){return this.message}},{key:"title",get:function(){return"SyntaxError at Line:".concat(this.range.startLineNumber," Col:").concat(this.range.endColumn)}}]),n}((0,Fn.Z)(Error)),ur=(0,Un.default)((function(){return n.e(454).then(n.bind(n,32454))}),{loadableGenerated:{webpack:function(){return[32454]},modules:["../EditorPanel.tsx -> ./EditorWithXStateImports"]}}),fr=(0,M.createModel)({code:"",notifRef:void 0,monacoRef:null,standaloneEditorRef:null,sourceRef:null,mainFile:"main.ts",machines:null,deltaDecorations:[]},{events:{COMPILE:function(){return{}},EDITOR_READY:function(e,t){return{monacoRef:e,standaloneEditorRef:t}},UPDATE_MACHINE_PRESSED:function(){return{}},EDITOR_ENCOUNTERED_ERROR:function(e,t){return{message:e,title:t}},EDITOR_CHANGED_VALUE:function(e){return{code:e}}}}),vr=fr.createMachine({entry:[(0,z.f0)({notifRef:function(){return(0,Qt.Cs)(en.c)}})],initial:"booting",states:{booting:{initial:"waiting_for_monaco",on:{EDITOR_CHANGED_VALUE:void 0},states:{waiting_for_monaco:{on:{EDITOR_READY:[{cond:"isGist",target:"fixing_gist_imports",actions:fr.assign({monacoRef:function(e,t){return t.monacoRef},standaloneEditorRef:function(e,t){return t.standaloneEditorRef}})},{target:"done",actions:fr.assign({monacoRef:function(e,t){return t.monacoRef},standaloneEditorRef:function(e,t){return t.standaloneEditorRef}})}]}},fixing_gist_imports:{invoke:{src:function(){var e=(0,c.Z)(s().mark((function e(t){var n,r,i,o,a,c,l,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.monacoRef,r=n.Uri.parse(t.mainFile),e.next=4,n.languages.typescript.getTypeScriptWorker();case 4:return i=e.sent,e.next=7,i(r);case 7:return o=e.sent,e.next=10,o.queryXStateGistIdentifiers(r.toString());case 10:(a=e.sent).length>0&&(c=lr(a),l=n.editor.getModel(r),d=l.getValue(),l.setValue("".concat(c,"\n").concat(d)));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onDone:"done",onError:{actions:["broadcastError"]}}},done:{type:"final"}},onDone:[{cond:function(e){return(0,tn.ew)(e.sourceRef.getSnapshot())},target:"compiling"},{target:"active"}]},active:{},updating:{tags:["visualizing"],entry:(0,z.lW)("UPDATE_MACHINE_PRESSED"),always:"active"},compiling:{tags:["visualizing"],invoke:{src:function(){var e=(0,c.Z)(s().mark((function e(t){var n,r,i,o,a,c,l,d,u,f,v;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.monacoRef,r=n.Uri.parse(t.mainFile),e.next=4,n.languages.typescript.getTypeScriptWorker().then((function(e){return e(r)}));case 4:return i=e.sent,e.next=7,i.getSyntacticDiagnostics(r.toString());case 7:if(!((o=e.sent).length>0)){e.next=15;break}return c=null===(a=t.monacoRef)||void 0===a?void 0:a.editor.getModel(r),l=o[0],d=null===c||void 0===c?void 0:c.getPositionAt(l.start),u=null===c||void 0===c?void 0:c.getPositionAt(l.start+l.length),f=new t.monacoRef.Range(null===d||void 0===d?void 0:d.lineNumber,0,null===u||void 0===u?void 0:u.lineNumber,null===u||void 0===u?void 0:u.column),e.abrupt("return",Promise.reject(new dr(l.messageText.toString(),f)));case 15:return e.next=17,i.getEmitOutput(r.toString()).then((function(e){return e.outputFiles[0].text}));case 17:return v=e.sent,e.abrupt("return",rr(v));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onDone:{target:"updating",actions:[(0,z.f0)({machines:function(e,t){return t.data}})]},onError:[{cond:"isSyntaxError",target:"active",actions:["addDecorations","scrollToLineWithError","broadcastError"]},{target:"active",actions:["broadcastError"]}]}}},on:{EDITOR_CHANGED_VALUE:{actions:[fr.assign({code:function(e,t){return t.code}}),"onChangedCodeValue","clearDecorations"]},EDITOR_ENCOUNTERED_ERROR:{actions:(0,z.lW)((function(e,t){return{type:"BROADCAST",status:"error",message:t.message}}),{to:function(e){return e.notifRef}})},UPDATE_MACHINE_PRESSED:{actions:"onChange"},COMPILE:"compiling"}},{guards:{isGist:function(e){return"gist"===e.sourceRef.getSnapshot().context.sourceProvider},isSyntaxError:function(e,t){return t.data instanceof dr}},actions:{broadcastError:(0,z.lW)((function(e,t){return{type:"EDITOR_ENCOUNTERED_ERROR",title:t.data.title,message:t.data.message}})),addDecorations:(0,z.f0)({deltaDecorations:function(e,t){var n=t.data.range;return e.standaloneEditorRef?e.standaloneEditorRef.deltaDecorations(e.deltaDecorations,[{range:n,options:{isWholeLine:!0,glyphMarginClassName:"editor__glyph-margin",className:"editor__error-content"}}]):e.deltaDecorations}}),clearDecorations:(0,z.f0)({deltaDecorations:function(e){return e.standaloneEditorRef.deltaDecorations(e.deltaDecorations,[])}}),scrollToLineWithError:function(e,t){var n=t.data.range,r=e.standaloneEditorRef;null===r||void 0===r||r.revealLineInCenterIfOutsideViewport(n.startLineNumber)}}}),hr=function(e){var t=e.onSave,n=e.onChange,r=e.onChangedCodeValue,a=e.onFork,s=e.onCreateNew,c=(0,P.b)(),l=(0,g.aC)(),d=(0,p.L)(l),f=(0,o.Z)(d,1)[0],v=(0,h.v)(l,(function(e){return e.context.sourceRef})),x=(0,p.L)(v),y=(0,o.Z)(x,1)[0],m=function(e){var t,n,r,i="no-source";return e.matches("no_source")||(i=e.context.loggedInUserId===(null===(t=e.context.sourceRegistryData)||void 0===t||null===(n=t.system)||void 0===n||null===(r=n.owner)||void 0===r?void 0:r.id)?"user-owns-source":"user-does-not-own-source"),i}(y),E=ze(),b=(function(e,t){if(e)switch(t){case"no-source":return{text:"Login to save",Icon:qt};case"user-does-not-own-source":case"user-owns-source":return{text:"Login to fork",Icon:Xt}}switch(t){case"no-source":case"user-owns-source":return{text:"Save",Icon:qt};case"user-does-not-own-source":;}}(f.matches("signed_out"),m),(0,tn.Ws)(y)),O=(0,$.eO)(vr,{actions:{onChange:function(e){n(e.machines)},onChangedCodeValue:function(e){r(e.code)}},context:or(or({},fr.initialContext),{},{code:b,sourceRef:v})}),S=(0,o.Z)(O,2),w=S[0],T=S[1],k=w.hasTag("visualizing");return(0,i.jsxs)(i.Fragment,{children:["visualizing"===E&&(0,i.jsx)(Kn,{onSave:function(){t()},onVisualize:function(){T("COMPILE")}}),(0,i.jsxs)(u.xu,{height:"100%",display:"grid",gridTemplateRows:"1fr auto","data-testid":"editor",children:["visualizing"===E&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{minHeight:0,minWidth:0},children:(0,i.jsx)(ur,{value:b,onMount:function(e,t){T({type:"EDITOR_READY",monacoRef:t,standaloneEditorRef:e})},onChange:function(e){T({type:"EDITOR_CHANGED_VALUE",code:e})},onFormat:function(){T({type:"COMPILE"})},onSave:function(){t()}})}),(0,i.jsxs)(R.Ug,{padding:"2",w:"full",justifyContent:"space-between",children:[(0,i.jsxs)(R.Ug,{children:[!(null!==c&&void 0!==c&&c.isEmbedded&&c.readOnly)&&(0,i.jsx)(Hn.u,{bg:"black",color:"white",label:"".concat((0,j.ZS)()," + Enter"),closeDelay:500,children:(0,i.jsx)(_.z,{disabled:k,isLoading:k,leftIcon:(0,i.jsx)(Wt,{fill:"gray.200",height:"16px",width:"16px"}),onClick:function(){T({type:"COMPILE"})},variant:"secondary",children:"\u53ef\u89c6\u5316"})}),!1,"user-owns-source"===m&&!(null!==c&&void 0!==c&&c.isEmbedded)&&(0,i.jsx)(_.z,{disabled:y.hasTag("forking"),isLoading:y.hasTag("forking"),onClick:function(){a()},leftIcon:(0,i.jsx)(Xt,{fill:"gray.200",height:"16px",width:"16px"}),variant:"outline",children:"Fork"})]}),"no-source"!==m&&!(null!==c&&void 0!==c&&c.isEmbedded)&&(0,i.jsx)(_.z,{leftIcon:(0,i.jsx)(D.d,{fill:"gray.200"}),onClick:s,variant:"outline",children:"New"})]})]}),"inspecting"===E&&(0,i.jsxs)(u.xu,{padding:"4",children:[(0,i.jsx)(fn.x,{as:"strong",children:"\u5ba1\u67e5\u6a21\u5f0f"}),(0,i.jsx)(fn.x,{children:"\u5f53\u524d\u6b63\u5904\u4e8e\u5ba1\u67e5\u6a21\u5f0f\u3002"})]})]})]})},pr=n(6780),gr=n(6569),xr=n(56884),yr=n(88134),mr=n(83346),Er=n(68978),jr=n(67273),br=n(33606),Or=n(13604),Sr={base00:"transparent",base01:"var(--chakra-colors-gray-800)",base02:"var(--chakra-colors-gray-700)",base03:"var(--chakra-colors-gray-600)",base04:"var(--chakra-colors-gray-500)",base05:"var(--chakra-colors-gray-100)",base06:"var(--chakra-colors-gray-100)",base07:"var(--chakra-colors-gray-100)",base08:"var(--chakra-colors-red-100)",base09:"var(--chakra-colors-orange-300)",base0A:"var(--chakra-colors-orange-200)",base0B:"var(--chakra-colors-green-400)",base0C:"var(--chakra-colors-green-200)",base0D:"var(--chakra-colors-blue-200)",base0E:"var(--chakra-colors-purple-300)",base0F:"var(--chakra-colors-orange-500)"},wr=(0,En.G)()?(0,Un.default)((function(){return n.e(171).then(n.t.bind(n,55171,23))}),{loadableGenerated:{webpack:function(){return[55171]},modules:["../JSONView.tsx -> react-json-view"]}}):function(){return null},Pr=function(e){var t=e.src,n=e.name,r=(0,dn.F)().theme;return(0,i.jsx)(wr,{src:t,name:n,theme:"dark"==r?Sr:"rjv-default",collapsed:1,onEdit:!1,displayDataTypes:!1,displayObjectSize:!1})};function Tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kr=function(e){var t=e.event,n=_e(),r=(0,h.v)(n,(function(e){var n;return t.origin&&(null===(n=e.context.serviceDataMap[t.origin])||void 0===n?void 0:n.machine.id)})),o=(0,h.v)(n,(function(e){var n;return null===(n=e.context.serviceDataMap[t.sessionId])||void 0===n?void 0:n.machine.id}));return(0,i.jsxs)(u.xu,{display:"inline-flex",flexDirection:"row",gap:"1ch",fontSize:"sm",children:[r&&(0,i.jsxs)(fn.x,{whiteSpace:"nowrap",children:[r," \u2192\xa0"]}),(0,i.jsx)(fn.x,{whiteSpace:"nowrap",children:o})]})},Ir={position:"sticky",top:0,backgroundColor:"var(--chakra-colors-gray-800)",zIndex:1},Cr={ASC:function(e){return e.sort((function(e,t){return e.timestamp<t.timestamp?1:-1}))},DESC:function(e){return e.sort((function(e,t){return e.timestamp>t.timestamp?1:-1}))}},Rr=(0,M.createModel)({sortCriteria:null,filterKeyword:"",showBuiltins:!1,rawEvents:[]},{events:{SORT_BY_TIMESTAMP:function(e){return{sortCriteria:e}},FILTER_BY_KEYWORD:function(e){return{keyword:e}},TOGGLE_BUILTIN_EVENTS:function(e){return{showBuiltins:e}},EVENTS_UPDATED:function(e){return{events:e}}}}),Ar=Rr.createMachine({initial:"raw",context:Rr.initialContext,states:{raw:{},modified:{}},on:{SORT_BY_TIMESTAMP:{target:"modified",actions:[Rr.assign((function(e,t){return{sortCriteria:t.sortCriteria}}))]},FILTER_BY_KEYWORD:{target:"modified",actions:[Rr.assign((function(e,t){return{filterKeyword:t.keyword}}))]},EVENTS_UPDATED:{actions:[Rr.assign((function(e,t){return{rawEvents:t.events}}))]},TOGGLE_BUILTIN_EVENTS:{target:"modified",actions:[Rr.assign((function(e,t){return{showBuiltins:t.showBuiltins}}))]}}}),Nr=function(){var e=_e(),t=(0,p.L)(e),n=(0,o.Z)(t,2),r=n[0],a=n[1],s=r.context.events,c=(0,h.v)(e,(function(e){var t;return null===(t=function(e){return e.context.currentSessionId?e.context.serviceDataMap[e.context.currentSessionId]:void 0}(e))||void 0===t?void 0:t.state.nextEvents}),(function(e,t){return JSON.stringify(e)===JSON.stringify(t)})),l=(0,$.eO)((function(){return Ar}),{context:Dr(Dr({},Rr.initialContext),{},{rawEvents:s})}),d=(0,o.Z)(l,2),v=d[0],g=d[1],x=function(e){var t=e.rawEvents;return e.showBuiltins||(t=t.filter((function(e){return!(0,j.tf)(e.name)&&!(0,j.qr)(e.name)}))),e.filterKeyword&&(t=t.filter((function(t){return t.name.toUpperCase().includes(e.filterKeyword.toUpperCase())}))),e.sortCriteria&&(t=Cr[e.sortCriteria](t.slice())),t}(v.context),y=(0,dn.F)().theme,m=Dr(Dr({},Ir),{},{color:"dark"==y?"var(--chakra-colors-gray-100)":"var(--chakra-colors-gray-800)",backgroundColor:"dark"==y?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)"});return(0,f.useEffect)((function(){g({type:"EVENTS_UPDATED",events:s})}),[s,g]),(0,i.jsxs)(u.xu,{display:"grid",gridTemplateRows:"auto 1fr auto",gridRowGap:"2",height:"100%",children:[(0,i.jsxs)(u.xu,{display:"flex",justifyContent:"flex-end",alignItems:"center",children:[(0,i.jsx)(Sn.I,{placeholder:"\u8fc7\u6ee4\u4e8b\u4ef6",type:"search",onChange:function(e){g({type:"FILTER_BY_KEYWORD",keyword:e.target.value})},marginRight:"auto",width:"40%"}),(0,i.jsxs)(u.xu,{display:"flex",alignItems:"center",children:[(0,i.jsx)(On.l,{marginBottom:"0",marginRight:"1",htmlFor:"builtin-toggle",children:"\u663e\u793a\u5185\u7f6e\u4e8b\u4ef6"}),(0,i.jsx)(yr.r,{style:{border:"1px solid var(--viz-color-fg)",borderRadius:"var(--chakra-radii-full)"},id:"builtin-toggle",onChange:function(e){g({type:"TOGGLE_BUILTIN_EVENTS",showBuiltins:e.target.checked})}})]})]}),(0,i.jsx)(u.xu,{overflowY:"auto",children:(0,i.jsxs)(mr.iA,{width:"100%",children:[(0,i.jsx)(mr.hr,{children:(0,i.jsxs)(mr.Tr,{children:[(0,i.jsx)(mr.Th,Dr(Dr({},m),{},{width:"100%",children:"\u4e8b\u4ef6\u7c7b\u578b"})),(0,i.jsx)(mr.Th,Dr(Dr({},m),{},{children:"\u5230"})),(0,i.jsxs)(mr.Th,Dr(Dr({},m),{},{whiteSpace:"nowrap",children:["\u65f6\u95f4",(0,i.jsxs)(u.xu,{display:"inline-flex",flexDirection:"column",verticalAlign:"middle",marginLeft:"1",children:[(0,i.jsx)(L.h,{"aria-label":"",title:"",icon:(0,i.jsx)(pr.g,{}),variant:"unstyled",size:"xs",bg:"DESC"===v.context.sortCriteria?"var(--chakra-colors-gray-700)":void 0,onClick:function(){g({type:"SORT_BY_TIMESTAMP",sortCriteria:"DESC"})}}),(0,i.jsx)(L.h,{"aria-label":"",title:"",icon:(0,i.jsx)(gr.v,{}),variant:"unstyled",size:"xs",bg:"ASC"===v.context.sortCriteria?"var(--chakra-colors-gray-700)":void 0,onClick:function(){g({type:"SORT_BY_TIMESTAMP",sortCriteria:"ASC"})}})]})]}))]})}),(0,i.jsx)(mr.p3,{children:x.map((function(e,t){return(0,i.jsx)(Lr,{event:e},t)}))})]})}),(0,i.jsx)(Mr,{onSend:function(e){return a({type:"SERVICE.SEND",event:e})},nextEvents:c})]})},Lr=function(e){var t=e.event,n=(0,f.useState)(!1),r=n[0],o=n[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(mr.Tr,{cursor:"pointer",onClick:function(){return o(!r)},children:[(0,i.jsxs)(mr.Td,{children:[r?(0,i.jsx)(gr.v,{}):(0,i.jsx)(xr.X,{}),t.name]}),(0,i.jsx)(mr.Td,{color:"gray.500",textAlign:"right",children:(0,i.jsx)(kr,{event:t})}),(0,i.jsx)(mr.Td,{color:"gray.500",children:(0,Or.Z)(t.timestamp,"H:mm:ss")})]}),r?(0,i.jsx)(mr.Tr,{children:(0,i.jsx)(mr.Td,{colSpan:3,children:(0,i.jsx)(Pr,{src:t.data})})}):null]})},_r=(0,M.createModel)({eventString:'{\n\t"type": ""\n}'},{events:{"EVENT.PAYLOAD":function(e){return{value:e}},"EVENT.SEND":function(){return{}},"EVENT.RESET":function(){return{}}}}),zr=_r.createMachine({type:"parallel",states:{validity:{initial:"invalid",states:{invalid:{},valid:{tags:"valid"}},on:{"*":[{cond:function(e){try{return"string"===typeof JSON.parse(e.eventString).type}catch(t){return!1}},target:".valid"},{target:".invalid"}]}},editing:{on:{"EVENT.PAYLOAD":{actions:(0,z.f0)({eventString:function(e,t){return t.value}})},"EVENT.SEND":{actions:["sendEvent",(0,z.lW)("EVENT.RESET")]},"EVENT.RESET":{actions:_r.reset()}}}}}),Mr=function(e){var t=e.onSend,n=e.nextEvents,r=(0,$.eO)(zr,{actions:{sendEvent:function(e){try{var n=(0,ve.toSCXMLEvent)(JSON.parse(e.eventString));t(n)}catch(r){console.error(r)}}}}),a=(0,o.Z)(r,2),s=a[0],c=a[1];return(0,i.jsx)(u.xu,{display:"flex",flexDirection:"row",css:{gap:".5rem"},children:(0,i.jsx)(Er.J2,{children:function(e){var t=e.onClose;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Er.xo,{children:(0,i.jsx)(_.z,{variant:"secondary",children:"\u53d1\u9001\u4e8b\u4ef6"})}),(0,i.jsx)(jr.h,{children:(0,i.jsxs)(Er.yk,{children:[(0,i.jsx)(Er.QH,{}),(0,i.jsx)(Er.Yt,{display:"flex",flexWrap:"wrap",css:{gap:".5rem"},children:n&&n.map((function(e){return(0,i.jsx)(_.z,{size:"xs",colorScheme:"blue",onClick:function(){return c(_r.events["EVENT.PAYLOAD"]('{\n\t"type": "'.concat(e,'"\n}')))},children:e},e)}))}),(0,i.jsx)(Er.b,{bg:"gray.800",children:(0,i.jsx)(br.ZP,{language:"json",options:{minimap:{enabled:!1},lineNumbers:"off",tabSize:2},height:"150px",width:"auto",value:s.context.eventString,onChange:function(e){e&&c(_r.events["EVENT.PAYLOAD"](e))}})}),(0,i.jsx)(Er.DT,{display:"flex",justifyContent:"flex-end",children:(0,i.jsxs)(N.h,{spacing:2,children:[(0,i.jsx)(_.z,{variant:"ghost",onClick:function(){c(_r.events["EVENT.RESET"]()),t()},children:"\u53d6\u6d88"}),(0,i.jsx)(_.z,{disabled:!s.hasTag("valid"),onClick:function(){c(_r.events["EVENT.SEND"]()),t()},children:"\u53d1\u9001"})]})})]})})]})}})})};function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zr=(0,M.createModel)({ref:null,widthDelta:0},{events:{DRAG_SESSION_STARTED:function(e){return{point:e.point}},DRAG_SESSION_STOPPED:function(){return{}},POINTER_MOVED_BY:function(e){return{delta:e.delta}}}}),Fr=Zr.createMachine({invoke:{id:"dragSessionTracker",src:function(e){return ie.withContext(Gr(Gr({},re.initialContext),{},{ref:e.ref}))}},initial:"idle",states:{idle:{on:{DRAG_SESSION_STARTED:"active"}},active:{on:{POINTER_MOVED_BY:{actions:(0,z.f0)({widthDelta:function(e,t){return Math.max(0,e.widthDelta-t.delta.x)}})},DRAG_SESSION_STOPPED:"idle"}}}}),Hr=function(e){var t=e.onChange,n=(0,f.useRef)(null),r=(0,$.eO)(Fr.withContext(Gr(Gr({},Zr.initialContext),{},{ref:n}))),a=(0,o.Z)(r,1)[0];return(0,f.useEffect)((function(){t(a.context.widthDelta)}),[a.context.widthDelta,t]),(0,i.jsx)(u.xu,{ref:n,"data-testid":"resize-handle",width:"1",css:{position:"absolute",top:0,left:0,height:"100%",cursor:"ew-resize",opacity:0,transition:"opacity 0.2s ease"},_hover:{opacity:1,background:"var(--chakra-colors-blue-300)"},_before:{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",transform:"scaleX(2)"}})},Ur=function(e){var t=e.children,n=e.disabled,r=(0,x.Z)(e,["children","disabled"]),o=(0,f.useState)(0),a=o[0],s=o[1];return(0,i.jsxs)(u.xu,Gr(Gr({},r),{},{style:n?void 0:{width:"clamp(36rem, calc(36rem + ".concat(a,"px), 70vw)")},children:[t,!n&&(0,i.jsx)(Hr,{onChange:function(e){return s(e)}})]}))},Yr=n(336),Br=(n(33091),n(4943)),Wr=function(){return(0,i.jsxs)(u.xu,{children:[(0,i.jsx)(Yr.X,{as:"h2",fontSize:"l",marginBottom:"5",children:"\u5feb\u6377\u952e"}),(0,i.jsxs)(mr.iA,{size:"sm",children:[(0,i.jsx)(mr.hr,{children:(0,i.jsxs)(mr.Tr,{children:[(0,i.jsx)(mr.Th,{children:"\u952e"}),(0,i.jsx)(mr.Th,{children:"\u63cf\u8ff0"})]})}),(0,i.jsxs)(mr.p3,{children:[(0,i.jsxs)(mr.Tr,{children:[(0,i.jsxs)(mr.Td,{children:[(0,i.jsx)(Wn.T,{children:(0,j.ZS)()})," + ",(0,i.jsx)(Wn.T,{children:"Enter"})]}),(0,i.jsx)(mr.Td,{children:"\u53ef\u89c6\u5316\u5f53\u524d\u7f16\u8f91\u5668\u4ee3\u7801"})]}),(0,i.jsxs)(mr.Tr,{children:[(0,i.jsx)(mr.Td,{children:(0,i.jsx)(R.gC,{alignItems:"flex-start",children:(0,i.jsxs)("span",{children:[(0,i.jsx)(Wn.T,{children:"Up"})," , ",(0,i.jsx)(Wn.T,{children:"Left"})," , ",(0,i.jsx)(Wn.T,{children:"Down"})," ,"," ",(0,i.jsx)(Wn.T,{children:"Right"})]})})}),(0,i.jsxs)(mr.Td,{children:["\u5e73\u79fb\u753b\u5e03\u3002\u4f7f\u7528 ",(0,i.jsx)(Wn.T,{children:"Shift"})," \u589e\u5927\u5e73\u79fb\u5e45\u5ea6\u3002"]})]}),(0,i.jsxs)(mr.Tr,{children:[(0,i.jsxs)(mr.Td,{children:[(0,i.jsx)(Wn.T,{children:"Shift"})," + ",(0,i.jsx)(Wn.T,{children:"1"})]}),(0,i.jsx)(mr.Td,{children:"\u9002\u914d\u5230\u7a97\u53e3\u5927\u5c0f"})]}),(0,i.jsxs)(mr.Tr,{children:[(0,i.jsx)(mr.Td,{children:(0,i.jsx)(R.gC,{alignItems:"flex-start",children:(0,i.jsxs)("span",{children:[(0,i.jsx)(Wn.T,{children:"+"})," , ",(0,i.jsx)(Wn.T,{children:"-"})]})})}),(0,i.jsx)(mr.Td,{children:"\u653e\u5927/\u7f29\u5c0f"})]})]})]})]})},qr=function(){(0,Br.g)();var e=ze();return(0,i.jsxs)(R.gC,{paddingY:"5",spacing:"7",alignItems:"stretch",children:["visualizing"===e&&(0,i.jsx)(Wr,{}),!1]})},Xr=n(30750),Kr=function(e){var t;return e.context.currentSessionId?null===(t=e.context.serviceDataMap[e.context.currentSessionId])||void 0===t?void 0:t.state:void 0},Jr=function(e){var t=e.state,n=null===t||void 0===t?void 0:t.value,r=null===t||void 0===t?void 0:t.context;return(0,i.jsxs)(u.xu,{"data-testid":"state-panel",children:[(0,i.jsx)(Pr,{src:"string"===typeof n?{_:n}:n,name:"Value"}),(0,i.jsx)(Pr,{src:r,name:"Context"}),(0,i.jsx)(Pr,{src:t,name:"State"})]})},$r=function(){var e=(0,h.v)(_e(),Kr);return(0,i.jsx)(Jr,{state:e})};function Qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ti=function(e){var t=(0,P.b)(),n=_e(),r=(0,h.v)(n,_n),a=(0,tn.CN)(),s=(0,o.Z)(a,2),c=s[0],l=s[1],d=(0,f.useState)((function(){return null!==t&&void 0!==t&&t.isEmbedded?(0,j.xr)(t.panel):0})),u=d[0],v=d[1],p=ze();return(0,f.useEffect)((function(){null!==t&&void 0!==t&&t.isEmbedded&&v((0,j.xr)(t.panel))}),[t]),(0,i.jsx)(Ur,ei(ei({},e),{},{gridArea:"panels",minHeight:0,disabled:(null===t||void 0===t?void 0:t.isEmbedded)&&t.mode!==rn.T.Full,hidden:(null===t||void 0===t?void 0:t.isEmbedded)&&t.mode===rn.T.Viz||e.hidden,"data-testid":"panels-view",children:(0,i.jsxs)(Rn.mQ,{bg:"var(--viz-panel-color-bg)",display:"grid",gridTemplateRows:"3rem 1fr",height:"100%",index:u,onChange:function(e){v(e)},style:{borderLeft:"1px solid var(--chakra-colors-gray-500)"},children:[(0,i.jsxs)(Rn.td,{children:["visualizing"===p&&(0,i.jsx)(Rn.OK,{children:"\u7f16\u8f91\u5668"}),(0,i.jsx)(Rn.OK,{children:"\u72b6\u6001"}),(0,i.jsx)(Rn.OK,{children:"\u4e8b\u4ef6"}),(0,i.jsxs)(Rn.OK,{children:["Actors"," ",(0,i.jsx)(An.C,{fontSize:"x-small",marginLeft:"1",colorScheme:"blue",children:Object.values(r).length})]}),!(null!==t&&void 0!==t&&t.isEmbedded)&&"visualizing"===p&&(0,i.jsx)(Rn.OK,{marginLeft:"auto",marginRight:"2",children:(0,i.jsx)(Cn.e,{"aria-label":"Settings"})}),!1,!1]}),(0,i.jsxs)(Rn.nP,{minHeight:0,children:["visualizing"===p&&(0,i.jsxs)(Rn.x4,{height:"100%",padding:0,children:[c.matches({with_source:"loading_content"})&&(0,i.jsx)(Xr.f,{text:"Loading source from ".concat(c.context.sourceProvider)}),!c.matches({with_source:"loading_content"})&&(0,i.jsx)(hr,{onChangedCodeValue:function(e){l({type:"CODE_UPDATED",code:e,sourceID:c.context.sourceID})},onCreateNew:function(){return l({type:"CREATE_NEW"})},onSave:function(){l({type:"SAVE"})},onChange:function(e){n.send({type:"MACHINES.REGISTER",machines:e})},onFork:function(){l({type:"FORK"})}})]}),(0,i.jsx)(Rn.x4,{height:"100%",overflowY:"auto",children:(0,i.jsx)($r,{})}),(0,i.jsx)(Rn.x4,{height:"100%",overflow:"hidden",children:(0,i.jsx)(Nr,{})}),(0,i.jsx)(Rn.x4,{height:"100%",overflowY:"auto",children:(0,i.jsx)(zn,{})}),!(null!==t&&void 0!==t&&t.isEmbedded)&&(0,i.jsx)(Rn.x4,{height:"100%",overflowY:"auto",children:(0,i.jsx)(qr,{})})]})]})}))},ni=n(18172),ri=n(70524),ii=(0,ri.Bw)();function oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}globalThis.__xstate__=ii;var si=(0,M.createModel)({state:void 0,notifRef:void 0,serviceDataMap:{},currentSessionId:null,events:[],previewEvent:void 0},{events:{"SERVICE.SEND":function(e){return{event:e}},"MACHINES.REGISTER":function(e){return{machines:e}},"MACHINES.RESET":function(){return{}},"EVENT.PREVIEW":function(e){return{eventType:e}},"PREVIEW.CLEAR":function(){return{}},"SERVICE.REGISTER":function(e){return ai(ai({},e),{},{status:Qt.TM.Running})},"SERVICE.STATE":function(e,t){return{sessionId:e,state:t}},"SERVICES.UNREGISTER_ALL":function(){return{}},"SERVICE.STOP":function(e){return{sessionId:e}},"SERVICE.FOCUS":function(e){return{sessionId:e}},ERROR:function(e){return{message:e}},"LAYOUT.PENDING":function(){return{}},"LAYOUT.READY":function(){return{}}}}),ci=si.createMachine({preserveActionOrder:!0,context:si.initialContext,initial:(0,En.G)()&&new URLSearchParams(window.location.search).has("inspect")?"inspecting":"visualizing",entry:(0,z.f0)({notifRef:function(){return(0,Qt.Cs)(en.c)}}),invoke:{src:"captureEventsFromChildServices"},states:{inspecting:{tags:"inspecting",invoke:{id:"proxy",src:function(){return function(e,t){var n=(0,ri.Kg)({targetWindow:window.opener||window.parent});return t((function(e){"xstate.event"===e.type&&n.send(ai(ai({},e),{},{type:"xstate.event",event:JSON.stringify(e.event)}))})),n.subscribe((function(t){switch(t.type){case"service.register":var n=t.machine.resolveState(t.state);e(si.events["SERVICE.REGISTER"]({sessionId:t.sessionId,machine:t.machine,state:n,parent:t.parent,source:"inspector"}));break;case"service.state":e(si.events["SERVICE.STATE"](t.sessionId,t.state));break;case"service.stop":e(si.events["SERVICE.STOP"](t.sessionId))}})).unsubscribe}}}},visualizing:{tags:"visualizing",invoke:{id:"proxy",src:function(){return function(e,t){var n=new Map,r=new Set,i=new Set;function o(t){var o;r.add(t);var a=(0,Qt.kJ)(t,{devTools:!0});i.add(a),n.set(a.sessionId,a),e(si.events["SERVICE.REGISTER"]({sessionId:a.sessionId,machine:a.machine,state:a.machine.initialState,parent:null===(o=a.parent)||void 0===o?void 0:o.sessionId,source:"visualizer"})),a.subscribe((function(t){e(si.events["SERVICE.STATE"](a.sessionId,t))})),a.start()}function a(){i.forEach((function(t){e(si.events["SERVICES.UNREGISTER_ALL"]()),t.stop()})),i.clear(),n.clear()}t((function(t){if("INTERPRET"===t.type)t.machines.forEach((function(t){try{o(t)}catch(n){e(si.events.ERROR(n.message))}}));else if("xstate.event"===t.type){var i=n.get(t.sessionId);if(i)try{i.send(t.event)}catch(s){console.error(s),e(si.events.ERROR(s.message))}}else"RESET"===t.type?(a(),r.forEach((function(e){o(e)}))):"STOP"===t.type&&(a(),r.clear())}))}}},initial:"idle",states:{idle:{tags:"empty"},pending:{tags:"layoutPending",on:{"LAYOUT.READY":"ready"}},ready:{}},on:{"LAYOUT.PENDING":".pending","MACHINES.REGISTER":{actions:["resetVisualizationState",(0,z.lW)("STOP",{to:"proxy"}),(0,z.lW)((function(e,t){return{type:"INTERPRET",machines:t.machines}}),{to:"proxy"})]},"MACHINES.RESET":{actions:["resetVisualizationState",(0,z.lW)("RESET",{to:"proxy"})]}}}},on:{"SERVICE.STATE":{actions:[si.assign({serviceDataMap:function(e,t){return(0,ni.ZP)(e.serviceDataMap,(function(e){var n=e[t.sessionId];n&&(e[t.sessionId].state=n.machine.resolveState(t.state))}))},events:function(e,t){return(0,ni.ZP)(e.events,(function(e){e.push(ai(ai({},t.state._event),{},{timestamp:Date.now(),sessionId:t.sessionId}))}))}})]},"SERVICE.SEND":{actions:[(0,z.lW)((function(e,t){return{type:"xstate.event",event:t.event,sessionId:e.currentSessionId}}),{to:"proxy"})]},"SERVICE.REGISTER":{actions:si.assign({serviceDataMap:function(e,t){t.type;var n=(0,x.Z)(t,["type"]);return(0,ni.ZP)(e.serviceDataMap,(function(e){e[n.sessionId]=n}))},currentSessionId:function(e,t){var n;return null!==(n=e.currentSessionId)&&void 0!==n?n:t.sessionId}})},"SERVICES.UNREGISTER_ALL":{actions:si.assign({serviceDataMap:{},currentSessionId:null})},"SERVICE.STOP":{actions:si.assign({serviceDataMap:function(e,t){return(0,ni.ZP)(e.serviceDataMap,(function(e){var n=e[t.sessionId];n&&(n.status=Qt.TM.Stopped)}))}})},"SERVICE.FOCUS":{actions:si.assign({currentSessionId:function(e,t){return t.sessionId}})},"EVENT.PREVIEW":{actions:si.assign({previewEvent:function(e,t){return t.eventType}})},"PREVIEW.CLEAR":{actions:si.assign({previewEvent:void 0})},ERROR:{actions:(0,z.lW)((function(e,t){return{type:"BROADCAST",status:"error",message:t.message}}),{to:function(e){return e.notifRef}})}}},{services:{captureEventsFromChildServices:function(){return function(e){ii.onRegister((function(t){var n;t.parent&&(e(si.events["SERVICE.REGISTER"]({sessionId:t.sessionId,machine:t.machine,state:t.state||t.initialState,parent:null===(n=t.parent)||void 0===n?void 0:n.sessionId,source:"child"})),t.subscribe((function(n){n&&e(si.events["SERVICE.STATE"](t.sessionId,n))})),t.onStop((function(){e(si.events["SERVICE.STOP"](t.sessionId))})))}))}}},actions:{resetVisualizationState:si.assign({events:[],previewEvent:void 0,currentSessionId:null})}}),li=(0,n(82775).B)({config:{initialColorMode:"dark",useSystemColorMode:!1},styles:{global:{"*, *:before, *:after":{position:"relative"},body:{overflow:"hidden",overscrollBehavior:"none",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif"},"#root":{height:"100vh",width:"100vw",overflow:"hidden"},".monaco-editor *":{position:"static"}}},components:{Button:{variants:{secondary:{bg:"gray.600",color:"white",_hover:{bg:"gray.400"}},secondaryPressed:{bg:"gray.600",color:"#679ae7",_hover:{bg:"#679ae7",color:"white"}}}}}});function di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?di(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hi={title:"XState Visualizer Lite",ogTitle:"XState Visualizer Lite",description:"Visualizer for XState state machines and statecharts",ogImageUrl:null},pi=function(){var e,t,n,r=(0,tn.wu)();return r?(0,i.jsx)(E,{title:[null===(e=r.system)||void 0===e?void 0:e.name,hi.title].filter(Boolean).join(" | "),ogTitle:(null===(t=r.system)||void 0===t?void 0:t.name)||hi.ogTitle,description:(null===(n=r.system)||void 0===n?void 0:n.name)||hi.description,ogImageUrl:nn(r.id)}):(0,i.jsx)(E,vi({},hi))},gi=function(e){return null!==e&&void 0!==e&&e.isEmbedded&&e.mode===rn.T.Viz?"canvas":null!==e&&void 0!==e&&e.isEmbedded&&e.mode===rn.T.Panels?"panels":"canvas panels"};var xi=!0,yi=function(e){var t,n=e.isEmbedded,r=void 0!==n&&n,a=(0,an.useRouter)(),l=a.query,x=a.asPath,y=(0,f.useMemo)((function(){return vi(vi({},(0,j.tT)(l)),{},{isEmbedded:r,originalUrl:(0,j.yO)(l)})}),[l,x]),m=(0,f.useState)("false"==l.panel),E=m[0],b=m[1],O=(0,v.k)(In),w=(0,v.k)(ci),T=(0,h.v)(w,(function(e){var t;return e.context.currentSessionId?null===(t=e.context.serviceDataMap[e.context.currentSessionId])||void 0===t?void 0:t.machine:void 0})),D=(0,h.v)(w,(function(e){return"inspecting"==e.value&&!e.context.currentSessionId})),k=(0,h.v)((0,g.aC)(),tn.d6),I=(0,p.L)(k),C=(0,o.Z)(I,2),R=C[0],A=C[1],N=(0,f.useState)(V.q.getTheme()),L=N[0],_=N[1];t={EMBED_PARAMS_CHANGED:function(e){an.default.replace(e.url,e.url)}},(0,f.useEffect)((function(){window.onmessage=function(){var e=(0,c.Z)(s().mark((function e(n){var r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.data,t&&(null===(r=t[i.type])||void 0===r||r.call(t,i));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),[]),(0,f.useEffect)((function(){A({type:"MACHINE_ID_CHANGED",id:(null===T||void 0===T?void 0:T.id)||""})}),[null===T||void 0===T?void 0:T.id,A]);var z=function(e){var t=e.sourceID,n=e.embed,r=(0,v.k)(K,{actions:{persistPositionToLocalStorage:function(e){var n=e.zoom,r=e.viewbox,i=e.embed;null!==i&&void 0!==i&&i.isEmbedded||V.q.savePosition(t,{zoom:n,viewbox:r})}},context:ui(ui({},H.initialContext),{},{embed:n})});return(0,f.useEffect)((function(){r.send({type:"SOURCE_CHANGED",id:t})}),[t,r]),r}({sourceID:R.context.sourceID,embed:y});return(0,En.G)()?D?(0,i.jsx)("div",{style:{position:"fixed",width:"100vw",height:"100vh",background:"#000"},children:(0,i.jsxs)("div",{className:"pacman",style:{width:100,height:100,position:"fixed",left:"50%",top:"50%",color:"#eee",fontSize:12},children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("br",{}),"\u7b49\u5f85\u8fde\u63a5\u2026\u2026"]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("iframe",{src:"https://ghbtns.com/github-btn.html?user=lecepin&repo=/&type=star&count=false&size=large",frameborder:"0",scrolling:"0",width:"100",height:"30",title:"GitHub",style:{position:"fixed",top:8,left:8,zIndex:999}}),(0,i.jsx)(pi,{}),(0,i.jsx)(P.w,{value:y,children:(0,i.jsx)(dn.f,{value:{theme:L,setTheme:_},children:(0,i.jsx)(d.x,{theme:li,children:(0,i.jsx)(Br.W,{children:(0,i.jsx)(Dn,{value:O,children:(0,i.jsx)(Le,{value:w,children:(0,i.jsxs)(u.xu,{"data-testid":"app","data-viz-theme":L,as:"main",display:"grid",gridTemplateColumns:"1fr auto",gridTemplateAreas:'"'.concat(gi(y),'"'),height:"100vh",children:[!(null!==y&&void 0!==y&&y.isEmbedded&&y.mode===rn.T.Panels)&&(0,i.jsx)(S,{value:z,children:(0,i.jsx)(mn,{hidePanel:E,switchPanelChange:function(e){return b(e)}})}),(0,i.jsx)(ti,{hidden:E}),(0,i.jsx)(wn,{})]})})})})})})})]}):(0,i.jsx)(pi,{})}},43753:function(e,t,n){n.d(t,{f:function(){return o},F:function(){return a}});var r=n(67294),i=r.createContext({theme:"dark",setTheme:function(e){}}),o=i.Provider,a=function(){return r.useContext(i)}}}]);
//# sourceMappingURL=837-0d835fd1dce602ea49e5.js.map