(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{26961:function(e,t,r){var n,o=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function o(e,t){if(!n[e]){n[e]={};for(var r=0;r<e.length;r++)n[e][e.charAt(r)]=r}return n[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var r=i._compress(e,6,(function(e){return t.charAt(e)}));switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(r){return o(t,e.charAt(r))}))},compressToUTF16:function(t){return null==t?"":i._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=i.compress(e),r=new Uint8Array(2*t.length),n=0,o=t.length;n<o;n++){var a=t.charCodeAt(n);r[2*n]=a>>>8,r[2*n+1]=a%256}return r},decompressFromUint8Array:function(t){if(null===t||void 0===t)return i.decompress(t);for(var r=new Array(t.length/2),n=0,o=r.length;n<o;n++)r[n]=256*t[2*n]+t[2*n+1];var a=[];return r.forEach((function(t){a.push(e(t))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,(function(e){return r.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(t){return o(r,e.charAt(t))})))},compress:function(t){return i._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,r){if(null==e)return"";var n,o,i,a={},s={},c="",u="",p="",l=2,f=3,d=2,h=[],m=0,g=0;for(i=0;i<e.length;i+=1)if(c=e.charAt(i),Object.prototype.hasOwnProperty.call(a,c)||(a[c]=f++,s[c]=!0),u=p+c,Object.prototype.hasOwnProperty.call(a,u))p=u;else{if(Object.prototype.hasOwnProperty.call(s,p)){if(p.charCodeAt(0)<256){for(n=0;n<d;n++)m<<=1,g==t-1?(g=0,h.push(r(m)),m=0):g++;for(o=p.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&o,g==t-1?(g=0,h.push(r(m)),m=0):g++,o>>=1}else{for(o=1,n=0;n<d;n++)m=m<<1|o,g==t-1?(g=0,h.push(r(m)),m=0):g++,o=0;for(o=p.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&o,g==t-1?(g=0,h.push(r(m)),m=0):g++,o>>=1}0==--l&&(l=Math.pow(2,d),d++),delete s[p]}else for(o=a[p],n=0;n<d;n++)m=m<<1|1&o,g==t-1?(g=0,h.push(r(m)),m=0):g++,o>>=1;0==--l&&(l=Math.pow(2,d),d++),a[u]=f++,p=String(c)}if(""!==p){if(Object.prototype.hasOwnProperty.call(s,p)){if(p.charCodeAt(0)<256){for(n=0;n<d;n++)m<<=1,g==t-1?(g=0,h.push(r(m)),m=0):g++;for(o=p.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&o,g==t-1?(g=0,h.push(r(m)),m=0):g++,o>>=1}else{for(o=1,n=0;n<d;n++)m=m<<1|o,g==t-1?(g=0,h.push(r(m)),m=0):g++,o=0;for(o=p.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&o,g==t-1?(g=0,h.push(r(m)),m=0):g++,o>>=1}0==--l&&(l=Math.pow(2,d),d++),delete s[p]}else for(o=a[p],n=0;n<d;n++)m=m<<1|1&o,g==t-1?(g=0,h.push(r(m)),m=0):g++,o>>=1;0==--l&&(l=Math.pow(2,d),d++)}for(o=2,n=0;n<d;n++)m=m<<1|1&o,g==t-1?(g=0,h.push(r(m)),m=0):g++,o>>=1;for(;;){if(m<<=1,g==t-1){h.push(r(m));break}g++}return h.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,r,n){var o,i,a,s,c,u,p,l=[],f=4,d=4,h=3,m="",g=[],v={val:n(0),position:r,index:1};for(o=0;o<3;o+=1)l[o]=o;for(a=0,c=Math.pow(2,2),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),a|=(s>0?1:0)*u,u<<=1;switch(a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),a|=(s>0?1:0)*u,u<<=1;p=e(a);break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),a|=(s>0?1:0)*u,u<<=1;p=e(a);break;case 2:return""}for(l[3]=p,i=p,g.push(p);;){if(v.index>t)return"";for(a=0,c=Math.pow(2,h),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),a|=(s>0?1:0)*u,u<<=1;switch(p=a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),a|=(s>0?1:0)*u,u<<=1;l[d++]=e(a),p=d-1,f--;break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=r,v.val=n(v.index++)),a|=(s>0?1:0)*u,u<<=1;l[d++]=e(a),p=d-1,f--;break;case 2:return g.join("")}if(0==f&&(f=Math.pow(2,h),h++),l[p])m=l[p];else{if(p!==d)return null;m=i+i.charAt(0)}g.push(m),l[d++]=i+m.charAt(0),i=m,0==--f&&(f=Math.pow(2,h),h++)}}};return i}();void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)},32454:function(e,t,r){"use strict";r.r(t),r.d(t,{EditorWithXStateImports:function(){return K},default:function(){return L}});var n=r(809),o=r.n(n),i=r(92809),a=r(30266),s=r(85893),c=r(33606),u=r(67294),p=r(33091),l=r(79412),f=r(38415),d=function(e){return new Promise((function(t,r){var n=document.createElement("script");n.src=e;var o=setTimeout((function(){r("Timeout")}),15e3);n.onload=function(){t(),clearTimeout(o)},document.body.appendChild(n)}))},h=function(){var e=!1,t=function(){var t=(0,a.Z)(o().mark((function t(){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:return r=window.define,window.define=function(){},t.next=6,Promise.all([d("https://unpkg.com/prettier@2.3.2/standalone.js"),d("https://unpkg.com/prettier@2.3.2/parser-typescript.js")]);case 6:window.define=r,e=!0;case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{format:function(){var e=(0,a.Z)(o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return e.abrupt("return",prettier.format(r,{parser:"typescript",plugins:prettierPlugins}));case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}}(),m=r(30750),g=r(4943),v=r(43753),b=r(71129),x=r(26961),y=r.n(x),w=r(99697),k=(0,w.VS)()?window.localStorage:(0,w.o6)(),O="undefined"!==typeof globalThis?globalThis:window||{};O.typeDefinitions={};var j=O.typeDefinitions,C=function(e,t){if(!e){var r=t.substring(0,t.indexOf("/")),n=t.substring(t.indexOf("/")+1);return"https://www.unpkg.com/".concat(encodeURIComponent(r),"/").concat(encodeURIComponent(n))}return"https://www.unpkg.com/".concat(encodeURIComponent(e),"/").concat(encodeURIComponent(t))},T=function(e,t,r){r.logger.error("".concat(e," - will not try again in this session"),t.status,t.statusText,t)},A=function(e){return["assert","async_hooks","buffer","child_process","cluster","console","constants","crypto","dgram","dns","domain","events","fs","fs/promises","http","http2","https","inspector","module","net","os","path","perf_hooks","process","punycode","querystring","readline","repl","stream","string_decoder","sys","timers","tls","trace_events","tty","url","util","v8","vm","wasi","worker_threads","zlib"].includes(e)?"node":e},M=function(e,t){return function(e,t){if(!e)return t;var r=e.split("/"),n=t.split("/");r.pop();for(var o=0;o<n.length;o++)"."!=n[o]&&(".."==n[o]?r.pop():r.push(n[o]));return r.join("/")}(t,e)},S=function(e,t,r){var n=0===t.indexOf("@")&&2===t.split("/").length;return-1===t.indexOf("@")&&1===t.split("/").length||n?t:"".concat(e,"-").concat(M(t,r))},D=function(){var e=(0,a.Z)(o().mark((function e(t,r,n){var i,a,s,c,u,p,l,f,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r&&0===r.indexOf("https://"),a=t,s=r,t||(a=r.substring(0,r.indexOf("/")),s=r.substring(r.indexOf("/")+1)),c=i?r:C(a,s),e.next=7,E(n,c);case 7:if(u=e.sent){e.next=18;break}return p=s&&0===s.indexOf("https://"),l="".concat(s.replace(".d.ts",""),"/index.d.ts"),f=p?s:C(a,l),e.next=14,E(n,f);case 14:if(u=e.sent){e.next=17;break}return e.abrupt("return",T("Could not get root d.ts file for the module '".concat(a,"' at ").concat(s),{},n));case 17:p||(s=l);case 18:return e.next=20,F(u,a,s,n);case 20:i?(d='declare module "'.concat(s,'" { ').concat(u," }"),n.addLibraryToRuntime(d,s)):n.addLibraryToRuntime(u,"file:///node_modules/".concat(a,"/").concat(s));case 21:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),_=function(){var e=(0,a.Z)(o().mark((function e(t,r){var n,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={types:{ts:"included"},objectID:t},j[t]=n,"included"!==n.types.ts){e.next=12;break}return C(t,"package.json"),i={name:"xstate",version:"4.30.0",description:"Finite State Machines and Statecharts for the Modern Web.",main:"lib/index.js",module:"es/index.js",types:"lib/index.d.ts",sideEffects:!1,funding:{type:"opencollective",url:"https://opencollective.com/xstate"},files:["dist","lib/**/*.js","lib/**/*.d.ts","es/**/*.js","es/**/*.d.ts"],keywords:["statechart","state machine","finite state machine","finite automata","scxml","state","interpreter"],scripts:{clean:"rm -rf lib es dist tsconfig.tsbuildinfo",test:"jest",build:"rollup -c",prepare:"npm run build"},repository:{type:"git",url:"git+https://github.com/statelyai/xstate.git"},author:"David Khourshid <davidkpiano@gmail.com>",license:"MIT",bugs:{url:"https://github.com/statelyai/xstate/issues"},homepage:"https://github.com/statelyai/xstate/tree/main/packages/core#readme",devDependencies:{"@babel/cli":"^7.10.5","@babel/core":"^7.10.5","@rollup/plugin-babel":"^5.3.0","@scion-scxml/test-framework":"^2.0.15","babel-plugin-annotate-pure-calls":"^0.4.0",jest:"^26.6.3",jsdom:"^14.0.0","jsdom-global":"^3.0.2","lerna-alias":"3.0.3-0","pkg-up":"^3.1.0",rollup:"^2.35.1","rollup-plugin-filesize":"^6.2.1","rollup-plugin-replace":"^2.2.0","rollup-plugin-terser":"^5.1.2","rollup-plugin-typescript2":"^0.30.0","rollup-plugin-uglify":"^6.0.2",rxjs:"^7.1.0","ts-jest":"^26.5.6",tslib:"^2.3.1",typescript:"^4.5.2","xml-js":"^1.6.11"}},r.addLibraryToRuntime(JSON.stringify(i,null,"  "),"file:///node_modules/".concat(t,"/package.json")),!(a=i.typing||i.typings||i.types)&&"string"===typeof i.main&&i.main.indexOf(".js")>0&&(a=i.main.replace(/js$/,"d.ts")),a||(a="index.d.ts"),e.abrupt("return",{mod:t,path:a,packageJSON:i});case 12:if("definitely-typed"!==n.types.ts){e.next=16;break}return e.abrupt("return",{mod:n.types.definitelyTyped,path:"index.d.ts",packageJSON:n});case 16:throw"This shouldn't happen";case 17:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)(o().mark((function e(t,r){var n,i,a,s,c,u,p,l,f,d,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=k.getItem(r))){e.next=11;break}if(i=n.split("-=-^-=-"),a=(0,b.Z)(i,2),s=a[0],c=a[1],u=new Date(s),p=new Date,6048e5,!(p.getTime()-u.getTime()<6048e5)){e.next=10;break}return e.abrupt("return",y().decompressFromUTF16(c));case 10:t.logger.log("Skipping cache for ",r);case 11:return e.next=13,t.fetcher(r);case 13:if((l=e.sent).ok){e.next=16;break}return e.abrupt("return",T("Could not get DTS response for the module at ".concat(r),l,t));case 16:return e.next=18,l.text();case 18:if(f=e.sent){e.next=21;break}return e.abrupt("return",T("Could not get text for DTS response at ".concat(r),l,t));case 21:return d=new Date,h="".concat(d.toISOString(),"-=-^-=-").concat(y().compressToUTF16(f)),k.setItem(r,h),e.abrupt("return",f);case 25:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),P=function(){var e=(0,a.Z)(o().mark((function e(t,r,n,i){var a,s,c,u,p,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.indexOf("reference path")>0)){e.next=19;break}s=/<reference path="(.*)" \/>/gm;case 2:if(null===(a=s.exec(t))){e.next=19;break}if(!(c=a[1])){e.next=17;break}if(!(u=M(c,n))){e.next=17;break}return p=C(r,u),e.next=10,E(i,p);case 10:if(l=e.sent){e.next=13;break}return e.abrupt("return",T("Could not get root d.ts file for the module '".concat(r,"' at ").concat(n),{},i));case 13:return e.next=15,F(l,r,u,i);case 15:f="file:///node_modules/".concat(r,"/").concat(u),i.addLibraryToRuntime(l,f);case 17:e.next=2;break;case 19:case"end":return e.stop()}}),e)})));return function(t,r,n,o){return e.apply(this,arguments)}}(),R=function(){var e=(0,a.Z)(o().mark((function e(t,r){var n,i,a,s,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>2&&void 0!==c[2]?c[2]:fetch,i=c.length>3?c[3]:void 0,a={sourceCode:t,addLibraryToRuntime:function(e,t){O.typeDefinitions[t]=e,r(e,t)},fetcher:n,logger:i.logger},s=F(t,void 0,"playground.ts",a),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),F=function(e,t,r,n){(function(e){for(var t,r=/(const|let|var)(.|\n)*? require\(('|")(.*)('|")\);?$/gm,n=/(import|export)((?!from)(?!require)(.|\n))*?(from|require\()\s?('|")(.*)('|")\)?;?$/gm,o=/import\s+?\(?('|")(.*)('|")\)?;?/gm,i=new Set;null!==(t=n.exec(e));)t[6]&&i.add(t[6]);for(;null!==(t=r.exec(e));)t[5]&&i.add(t[5]);for(;null!==(t=o.exec(e));)t[2]&&i.add(t[2]);return Array.from(i)})(e).filter((function(e){return t||/^xstate($|\/)/.test(e)})).forEach(function(){var e=(0,a.Z)(o().mark((function e(i){var a,s,c,u,p,l,f,d,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=A(i),t||!a.startsWith(".")){e.next=3;break}return e.abrupt("return",n.logger.log("[ATA] Can't resolve relative dependencies from the playground root"));case 3:if(s=S(t,a,t),!j[s]&&null!==j[s]){e.next=6;break}return e.abrupt("return");case 6:if(c=0===a.indexOf("@")&&2===a.split("/").length,u=-1===a.indexOf("@")&&1===a.split("/").length&&"."!==a&&".."!==a,p=u||c,l=0===a.indexOf("https://"),!p){e.next=22;break}return j[s]=null,e.next=15,_(a,n);case 15:if(!(f=e.sent)){e.next=20;break}return j[s]=f.packageJSON,e.next=20,D(f.mod,f.path,n);case 20:e.next=35;break;case 22:if(!l){e.next=27;break}return e.next=25,D(a,a,n);case 25:e.next=35;break;case 27:if(a&&r){e.next=29;break}throw"No outer module or path for a relative import: ".concat(a);case 29:return d=M(a,r),"."===a&&(d+="/index"),j[s]=null,h=d.endsWith(".ts")?d:d+".d.ts",e.next=35,D(t,h,n);case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P(e,t,r,n)};function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=function(e,t){var r=function(e,r){t.languages.typescript.typescriptDefaults.addExtraLib(e,r);var n=t.Uri.file(r);null===t.editor.getModel(n)&&t.editor.createModel(e,"javascript",n)};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.getModel().getValue();R(t,r,window.fetch.bind(window),{logger:{log:function(){},error:console.error,warn:console.warn}})}(["xstate","xstate/lib/model","xstate/lib/actions"].map((function(e){return"import '".concat(e,"'")})).join("\n")),e},K=function(e){var t=(0,l.b)(),r=(0,g.g)(),n=(0,u.useRef)(null),i=(0,u.useRef)(new Set),d=(0,v.F)().theme;return(0,u.useEffect)((function(){var e=n.current,t=i.current,o=r.theme;e&&t&&(t.has(o)||e.defineTheme(o,p.n[o]),e.setTheme(o),f.q.saveEditorTheme(r.theme))}),[r.theme]),(0,s.jsx)(c.ZP,{defaultPath:"main.ts",defaultLanguage:"typescript",value:e.value,options:{minimap:{enabled:!1},tabSize:2,glyphMargin:!0,readOnly:(null===t||void 0===t?void 0:t.isEmbedded)&&t.readOnly},loading:(0,s.jsx)(m.f,{text:"\u7f16\u8f91\u5668\u52a0\u8f7d\u4e2d"}),onChange:function(t){var r;"string"===typeof t&&(null===(r=e.onChange)||void 0===r||r.call(e,t))},theme:"dark"==d?"vs-dark":"light",onMount:function(){var t=(0,a.Z)(o().mark((function t(i,s){var c,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.current=s.editor,r.theme,s.languages.typescript.typescriptDefaults.setWorkerOptions({customWorkerPath:"".concat(new URL(window.location.origin),"viz/ts-worker.js")}),s.languages.typescript.typescriptDefaults.setCompilerOptions(Z(Z({},s.languages.typescript.typescriptDefaults.getCompilerOptions()),{},{module:s.languages.typescript.ModuleKind.CommonJS,moduleResolution:s.languages.typescript.ModuleResolutionKind.NodeJs,strict:!0})),i.addAction({id:"format",label:"Format",keybindings:[s.KeyMod.CtrlCmd|s.KeyCode.Enter],run:function(e){e.getAction("editor.action.formatDocument").run()}}),s.languages.registerDocumentFormattingEditProvider("typescript",{provideDocumentFormattingEdits:function(){var t=(0,a.Z)(o().mark((function t(r){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.format(i.getValue());case 3:return t.t0=t.sent,t.t1=r.getFullModelRange(),t.t2={text:t.t0,range:t.t1},t.abrupt("return",[t.t2]);case 9:t.prev=9,t.t3=t.catch(0),console.error(t.t3);case 12:return t.prev=12,null===(n=e.onFormat)||void 0===n||n.call(e),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})));return function(e){return t.apply(this,arguments)}}()}),i.addAction({id:"save",label:"Save",keybindings:[s.KeyMod.CtrlCmd|s.KeyCode.KEY_S],run:function(){var t;null===(t=e.onSave)||void 0===t||t.call(e),i.getAction("editor.action.formatDocument").run()}}),u=I(i,s),null===(c=e.onMount)||void 0===c||c.call(e,u,s);case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()})},L=K}}]);
//# sourceMappingURL=454.feaf13331ccd6d1a10bd.js.map